海阔视界规则分享，当前分享的是：小程序￥home_rule_v2￥base64://@JustLive@eyJsYXN0X2NoYXB0ZXJfcnVsZSI6IiIsInRpdGxlIjoiSnVzdExpdmUiLCJhdXRob3IiOiJKb2UmJumaj+mjjiYm5Y+R57Kq5raC5aKZJiZSeCYmWnJ1aXJ5IiwidXJsIjoiaGlrZXI6Ly9lbXB0eSMjZnlwYWdlIiwidmVyc2lvbiI6MjAyMzEwMjYsImNvbF90eXBlIjoibW92aWVfMyIsImNsYXNzX25hbWUiOiIiLCJ0eXBlIjoidmlkZW8iLCJjbGFzc191cmwiOiIiLCJhcmVhX25hbWUiOiIiLCJhcmVhX3VybCI6IiIsInNvcnRfbmFtZSI6IiIsInllYXJfbmFtZSI6IiIsInNvcnRfdXJsIjoiIiwieWVhcl91cmwiOiIiLCJmaW5kX3J1bGUiOiJqczpcbmxldCBkID0gW107XG5sZXQgcyA9IFtdO1xubGV0IGFwaSA9IFwiaHR0cDovL3lqMTIxMS53b3JrOjgwMTMvYXBpL2xpdmUvXCI7XG5sZXQgdWlkID0gZ2V0SXRlbShcInVpZFwiLCBcIlwiKTtcbmxldCBjbGFzID0gZ2V0TXlWYXIoXCJjbGFzc1wiLCBcImFsbFwiKTtcbmxldCBoZWFkZXJzID0ge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJVc2VyLUFnZW50XCI6IFwib2todHRwLzMuMTIuMTNcIlxuICAgIH1cbn07XG5cbmlmIChNWV9QQUdFID09IDEpIHtcbiAgICBzLnVuc2hpZnQoe1xuICAgICAgICB0aXRsZTogZ2V0SXRlbShcIm5pY2tuYW1lXCIsIFwi5rOo5YaMIC8g55m75b2VXCIpLFxuICAgICAgICBkZXNjOiBnZXRJdGVtKFwidXNlcm5hbWVcIiwgXCJcIikgKyBcIlxcdFxcdFwiLFxuICAgICAgICB1cmw6ICQoXCIjbm9Mb2FkaW5nI1wiKS5sYXp5UnVsZSgoKSA9PiB7XG4gICAgICAgICAgICBwdXRNeVZhcihcInNUeXBlXCIsIFwibGl2aW5nXCIpO1xuICAgICAgICAgICAgcmV0dXJuIFwiaGlrZXI6Ly9wYWdlL2hpc3Rvcnkjbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjXCI7XG4gICAgICAgIH0pLFxuICAgICAgICBpbWc6IFwiaHR0cHM6Ly9oaWtlcmZhbnMuY29tL3R1Ymlhby9rZS83My5wbmdcIixcbiAgICAgICAgY29sX3R5cGU6IFwiYXZhdGFyXCJcbiAgICB9KTtcbiAgICBzLnB1c2goe1xuICAgICAgICB0aXRsZTogXCLmkJzntKJcIixcbiAgICAgICAgZGVzYzogdWlkID09IFwiXCIgPyBcIuaQnCDntKIg6ZyAIOWFiCDnmbsg5b2VXCIgOiBcIuWPryDku6Ug5bCRIOWtlyDvvIzkuI0g5Y+vIOmUmSDlrZcg77yBXCIsXG4gICAgICAgIHVybDogJC50b1N0cmluZygoKSA9PiB7XG4gICAgICAgICAgICBwdXRNeVZhcihcIk15a2V5XCIsIGlucHV0KTtcbiAgICAgICAgICAgIHJlZnJlc2hQYWdlKHRydWUpXG4gICAgICAgIH0pLFxuICAgICAgICBjb2xfdHlwZTogXCJpbnB1dFwiLFxuICAgICAgICBleHRyYToge1xuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBnZXRNeVZhcihcIk15a2V5XCIpXG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGNvbF90eXBlOiBcImJpZ19ibGFua19ibG9ja1wiXG4gICAgfSwge1xuICAgICAgICBjb2xfdHlwZTogXCJiaWdfYmxhbmtfYmxvY2tcIlxuICAgIH0sIHtcbiAgICAgICAgY29sX3R5cGU6IFwibGluZV9ibGFua1wiXG4gICAgfSk7XG5cbiAgICAvL+eDremXqOebtOaSrVxuICAgIHMucHVzaCh7XG4gICAgICAgIHRpdGxlOiAnPGZvbnQgY29sb3I9XCIjMGFhMzQ0XCI+54Ot6Zeo55u05pKtPC9mb250PicsXG4gICAgICAgIGRlc2M6ICc8Zm9udCBjb2xvcj1cIiMwYWEzNDRcIj7inq5cXHRcXHQ8L2ZvbnQ+JyxcbiAgICAgICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKCgpID0+IHtcbiAgICAgICAgICAgIHB1dE15VmFyKFwidHlwZU5hbWVWYXJcIiwgJ+WFqOmDqCcpO1xuICAgICAgICAgICAgcmV0dXJuIFwiaGlrZXI6Ly9wYWdlL25ld0NsYXNzXCIgKyAnI25vSGlzdG9yeSMnO1xuICAgICAgICB9KSxcbiAgICAgICAgaW1nOiBcImh0dHBzOi8vaW1nMS5iYWlkdS5jb20vaXQvdT0xMTMxMzMxNDE2LDI2NjY0NjczNTQmZm09MjUzJmZtdD1hdXRvJmFwcD0xMjAmZj1QTkc/dz01MDAmaD01MDBAUmVmZXJlcj1cIixcbiAgICAgICAgY29sX3R5cGU6IFwiYXZhdGFyXCJcbiAgICB9KTtcblxuICAgIGxldCBDVCA9IERhdGUubm93KCk7XG4gICAgbGV0IExUID0gXCJcIjtcbiAgICB0cnkge1xuICAgICAgICBldmFsKFwidmFyIGZsYiA9IFwiICsgcmVhZEZpbGUoXCJoaWtlcjovL2ZpbGVzL2NhY2hlL2p1c3RsaXZlLmpzXCIpLCAwKTtcbiAgICAgICAgTFQgPSBmbGIubHQ7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBMVCA9IFwiMFwiO1xuICAgIH07XG4gICAgbGV0IHNhcmVhID0gZ2V0TXlWYXIoXCJzYXJlYVwiLCBcIjBcIik7XG4gICAgaWYgKCFmaWxlRXhpc3QoXCJoaWtlcjovL2ZpbGVzL2NhY2hlL2p1c3RsaXZlLmpzXCIpIHx8IENUID4gKExUICsgMiAqIDI0ICogNjAgKiA2MCAqIDEwMDApIHx8IHNhcmVhICE9PSBcIjBcIikge1xuICAgICAgICAvL+a4uOS+oFxuICAgICAgICBsZXQgeXh1cmwgPSBcImh0dHBzOi8vYXBwLmFsaTIxMy5uZXQvdG9wL2hvdC5odG1sXCI7XG4gICAgICAgIGxldCBhcmVhID0gXCJcIjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGFyZWEgPSBzYXJlYSA9PSBcIjBcIiA/IGZsYi5hcmVhIDogZmxiLmFyZWEgKyBcInxcIiArIHNhcmVhO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhcmVhID0gXCLnlLvnrKbog73miYt85oiR55qE5YuH6ICFfOWkquepuuihjOWKqHzlv5fmiJjnlaV85by55aOz54m5fOWcsOmTgei3kXzlv43ogIXmlrDkuJZ85ouj54ixXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IGxpc2YgPSBwZGZhKGZldGNoKHl4dXJsKSwgXCIubWFpbi1jb250YWluZXImJmltZ1wiKS5maWx0ZXIoZWxlbWVudCA9PiAhbmV3IFJlZ0V4cChhcmVhKS50ZXN0KGVsZW1lbnQpKS5zbGljZSgwLCA4KTtcbiAgICAgICAgbGV0IGxpc3QgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgbGkgb2YgbGlzZikge1xuICAgICAgICAgICAgbGV0IHRpdGxlID0gcGRmaChsaSwgXCJpbWcmJmFsdFwiKTtcbiAgICAgICAgICAgIGxldCBwaWMgPSBwZGZoKGxpLCBcImltZyYmc3JjXCIpO1xuICAgICAgICAgICAgbGlzdC5wdXNoKHRpdGxlICsgXCIkXCIgKyBwaWMpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmbCA9IHtcbiAgICAgICAgICAgIFwibHRcIjogQ1QsXG4gICAgICAgICAgICBcImxpc3RcIjogbGlzdCxcbiAgICAgICAgICAgIFwiYXJlYVwiOiBhcmVhXG4gICAgICAgIH07XG4gICAgICAgIHNhdmVGaWxlKFwiaGlrZXI6Ly9maWxlcy9jYWNoZS9qdXN0bGl2ZS5qc1wiLCBKU09OLnN0cmluZ2lmeShmbCksIDApO1xuICAgICAgICBjbGVhck15VmFyKFwic2FyZWFcIik7XG4gICAgfTtcblxuICAgIGxldCBsaXN0ID0gdHlwZW9mKGZsKSAhPT0gXCJ1bmRlZmluZWRcIiA/IGZsLmxpc3QgOiBmbGIubGlzdDtcbiAgICBmb3IgKGxldCBsaSBvZiBsaXN0KSB7XG4gICAgICAgIGxldCB0aXRsZSA9IGxpLnNwbGl0KFwiJFwiKVswXTtcbiAgICAgICAgcy5wdXNoKHtcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgIGltZzogbGkuc3BsaXQoXCIkXCIpWzFdLFxuICAgICAgICAgICAgY29sX3R5cGU6IFwiaWNvbl9yb3VuZF9zbWFsbF80XCIsXG4gICAgICAgICAgICB1cmw6ICQoXCIjbm9Mb2FkaW5nI1wiKS5sYXp5UnVsZSgodGl0bGUpID0+IHtcbiAgICAgICAgICAgICAgICBwdXRNeVZhcihcImhvbWVcIiwgXCIxXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBcImhpa2VyOi8vcGFnZS9uZXdDbGFzc0xpc3Q/dHlwZU5hbWU95omL5ri4JmFyZWFOYW1lPVwiICsgdGl0bGUgKyBcIiZwYWdlPWZ5cGFnZSNub0hpc3RvcnkjXCI7XG4gICAgICAgICAgICB9LCB0aXRsZSksXG4gICAgICAgIH0pXG4gICAgfTtcblxuICAgIHMucHVzaCh7XG4gICAgICAgIGNvbF90eXBlOiBcImJpZ19ibGFua19ibG9ja1wiXG4gICAgfSwge1xuICAgICAgICBjb2xfdHlwZTogXCJiaWdfYmxhbmtfYmxvY2tcIlxuICAgIH0sIHtcbiAgICAgICAgY29sX3R5cGU6IFwibGluZV9ibGFua1wiXG4gICAgfSwge1xuICAgICAgICBjb2xfdHlwZTogXCJiaWdfYmxhbmtfYmxvY2tcIlxuICAgIH0sIHtcbiAgICAgICAgY29sX3R5cGU6IFwiYmlnX2JsYW5rX2Jsb2NrXCJcbiAgICB9KTtcblxuICAgIC8v5YWo6YOo5YiG57G7XG4gICAgcy5wdXNoKHtcbiAgICAgICAgdGl0bGU6IGdldE15VmFyKFwiTXlrZXlcIikgPyAn5pCc57Si55u05pKtJyA6IFwi5YWo6YOo55u05pKtXCIsXG4gICAgICAgIGRlc2M6IGdldE15VmFyKFwiTXlrZXlcIikgPyAnPGZvbnQgY29sb3I9XCIjMGFhMzQ0XCI+6L+U5ZueXFx0PC9mb250PicgOiBcIlwiLFxuICAgICAgICB1cmw6ICQoJyNub0xvYWRpbmcjJykubGF6eVJ1bGUoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGdldE15VmFyKFwiTXlrZXlcIiwgXCJcIikgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiAnaGlrZXI6Ly9lbXB0eSc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBjbGVhck15VmFyKFwiTXlrZXlcIik7XG4gICAgICAgICAgICAgICAgY2xlYXJNeVZhcihcImNsYXNzXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiAnaGlrZXI6Ly9lbXB0eSc7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgaW1nOiBnZXRNeVZhcihcIk15a2V5XCIpID8gXCJodHRwczovL2hpa2VyZmFucy5jb20vdHViaWFvL21lc3N5LzI1LnN2Z0BSZWZlcmVyPVwiIDogXCJodHRwczovL2ltZzIuYmFpZHUuY29tL2l0L3U9NTE3ODkzMDI3LDI0NzQ1OTY2OTcmZm09MjUzJmZtdD1hdXRvJmFwcD0xMzgmZj1KUEVHP3c9NTAwJmg9NTk0QFJlZmVyZXI9XCIsXG4gICAgICAgIGNvbF90eXBlOiBcImF2YXRhclwiXG4gICAgfSwge1xuICAgICAgICBjb2xfdHlwZTogXCJiaWdfYmxhbmtfYmxvY2tcIlxuICAgIH0sIHtcbiAgICAgICAgY29sX3R5cGU6IFwiYmlnX2JsYW5rX2Jsb2NrXCJcbiAgICB9KTtcblxuICAgIGxldCBsZWkgPSBbXCLlhajpg6hcIiwgXCLomY7niZlcIiwgXCLmlpfpsbxcIiwgXCLlk5Tlk6lcIiwgXCLmipbpn7NcIiwgXCLnvZHmmJNcIl07XG4gICAgbGV0IGx1cmwgPSBbXCJhbGxcIiwgXCJodXlhXCIsIFwiZG91eXVcIiwgXCJiaWxpYmlsaVwiLCBcImRvdXlpblwiLCBcImNjXCJdO1xuICAgIGZvciAobGV0IGkgaW4gbGVpKSB7XG4gICAgICAgIHMucHVzaCh7XG4gICAgICAgICAgICB0aXRsZTogbHVybFtpXSA9PSBjbGFzID8gXCLigJjigJjigJnigJk8Yj5cIiArIGxlaVtpXS5mb250Y29sb3IoXCIjRkE3Mjk4XCIpICsgXCI8L2I+XCIgOiBsZWlbaV0sXG4gICAgICAgICAgICB1cmw6ICQoJyNub0xvYWRpbmcjJykubGF6eVJ1bGUoKHVybCkgPT4ge1xuICAgICAgICAgICAgICAgIHB1dE15VmFyKFwiY2xhc3NcIiwgdXJsKTtcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaGlrZXI6Ly9lbXB0eVwiXG4gICAgICAgICAgICB9LCBsdXJsW2ldKSxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcInNjcm9sbF9idXR0b25cIlxuICAgICAgICB9KVxuICAgIH07XG4gICAgcy5wdXNoKHtcbiAgICAgICAgY29sX3R5cGU6IFwiYmlnX2JsYW5rX2Jsb2NrXCJcbiAgICB9LCB7XG4gICAgICAgIGNvbF90eXBlOiBcImJpZ19ibGFua19ibG9ja1wiXG4gICAgfSk7XG5cbiAgICBzLnB1c2goe1xuICAgICAgICBpbWc6IFwiXCIsXG4gICAgICAgIHVybDogXCJoaWtlcjovL2VtcHR5XCIsXG4gICAgICAgIGNvbF90eXBlOiBcImNhcmRfcGljXzNcIixcbiAgICAgICAgZXh0cmE6IHtcbiAgICAgICAgICAgIGNsczogXCJjbHNfbG9hZFwiXG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGltZzogXCJodHRwczovL2hpa2VyZmFucy5jb20vd2Vpc3lyL2ltZy9Mb2FkaW5nMS5naWZcIixcbiAgICAgICAgdXJsOiBcImhpa2VyOi8vZW1wdHlcIixcbiAgICAgICAgY29sX3R5cGU6IFwicGljXzNcIixcbiAgICAgICAgZXh0cmE6IHtcbiAgICAgICAgICAgIGNsczogXCJjbHNfbG9hZFwiXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBzZXRQcmVSZXN1bHQocyk7XG59O1xuXG4vL+aQnOe0ouWIl+ihqFxuaWYgKGdldE15VmFyKFwiTXlrZXlcIikpIHtcbiAgICBpZiAoTVlfUEFHRSA9PSAnMScpIHtcbiAgICAgICAgaWYgKHVpZCA9PSBcIlwiKSB7XG4gICAgICAgICAgICBkLnB1c2goe1xuICAgICAgICAgICAgICAgIHRpdGxlOiBcIueZu+W9leWQjue7p+e7reaQnOe0olwiLFxuICAgICAgICAgICAgICAgIGRlc2M6IFwi54K55Ye755m75b2VXCIsXG4gICAgICAgICAgICAgICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcHV0TXlWYXIoXCJzVHlwZVwiLCAnbGl2aW5nJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaGlrZXI6Ly9wYWdlL2hpc3Rvcnkjbm9IaXN0b3J5IyNub1JlY29yZEhpc3RvcnkjJ1xuXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGV0IHNzX3VybCA9IGFwaSArIFwic2VhcmNoP3BsYXRmb3JtPVwiICsgY2xhcyArIFwiJmtleVdvcmRzPVwiICsgZ2V0TXlWYXIoXCJNeWtleVwiKSArIFwiJnVpZD1cIiArIHVpZDtcbiAgICAgICAgICAgICAgICBsZXQganNvbiA9IEpTT04ucGFyc2UoZmV0Y2goc3NfdXJsLCBoZWFkZXJzKSkuZGF0YTtcbiAgICAgICAgICAgICAgICBsZXQgcGxhY2UgPSBcInNvXCI7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSBpbiBqc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0ganNvbltpXTtcbiAgICAgICAgICAgICAgICAgICAgJC5yZXF1aXJlKFwicHVibGljXCIpLlB1YmxpYy5MaXN0cyhhcGksIHVpZCwgcGxhY2UsIGQsIGRhdGEucm9vbUlkLCBkYXRhLnBsYXRmb3JtLCBkYXRhLm5pY2tOYW1lLCBkYXRhLmNhdGVOYW1lLCBkYXRhLmZvbGxvd2VycywgZGF0YS5oZWFkUGljLCBkYXRhLmlzTGl2ZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCLigJzigJzliLDlupXkuoblkaLigJ3igJ1cIixcbiAgICAgICAgICAgICAgICAgICAgZGVzYzogJ+eCueWHu+i/lOWbnummlumhtScsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJCgnI25vTG9hZGluZyMnKS5sYXp5UnVsZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJNeVZhcihcIk15a2V5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2hpa2VyOi8vZW1wdHknXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCJcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuKAnOKAnOaQnOe0ouacquefpemUmeivr+KAneKAnVwiLFxuICAgICAgICAgICAgICAgICAgICBkZXNjOiAn54K55Ye76L+U5Zue6aaW6aG1JyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhck15VmFyKFwiTXlrZXlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnaGlrZXI6Ly9lbXB0eSdcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGNvbF90eXBlOiBcInRleHRfY2VudGVyXzFcIlxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgdG9hc3QoXCLmkJzntKLlh7rnjrDplJnor69cIik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH07XG59IGVsc2Uge1xuICAgIC8v5Li76aG15YiX6KGoXG4gICAgbGV0IGhvbWUgPSBhcGkgKyBcImdldFJlY29tbWVuZD9wYWdlPVwiICsgTVlfUEFHRSArIFwiJnNpemU9MjBcIjtcbiAgICBsZXQgZmVuID0gYXBpICsgXCJnZXRSZWNvbW1lbmRCeVBsYXRmb3JtP3BsYXRmb3JtPVwiICsgY2xhcyArIFwiJnBhZ2U9XCIgKyBNWV9QQUdFICsgXCImc2l6ZT0yMFwiO1xuICAgIGxldCB1cmwgPSBjbGFzID09IFwiYWxsXCIgPyBob21lIDogZmVuO1xuICAgIGxldCByZXMgPSBKU09OLnBhcnNlKHJlcXVlc3QodXJsLCBoZWFkZXJzKSkuZGF0YTtcbiAgICBsZXQgcGxhY2UgPSBcImhvbWVcIjtcbiAgICBmb3IgKGxldCBpIGluIHJlcykge1xuICAgICAgICBsZXQgdGVtcCA9IHJlc1tpXTtcbiAgICAgICAgJC5yZXF1aXJlKFwicHVibGljXCIpLlB1YmxpYy5MaXN0cyhhcGksIHVpZCwgcGxhY2UsIGQsIHRlbXAucm9vbUlkLCB0ZW1wLnBsYXRGb3JtLCB0ZW1wLm93bmVyTmFtZSwgdGVtcC5jYXRlZ29yeU5hbWUsIHRlbXAub25saW5lLCB0ZW1wLnJvb21QaWMsIHRlbXAuaXNMaXZlKTtcbiAgICB9O1xufTtcbmRlbGV0ZUl0ZW1CeUNscyhcImNsc19sb2FkXCIpO1xuc2V0UmVzdWx0KGQpOyIsInNlYXJjaF91cmwiOiJoaWtlcjovL2VtcHR5P2t3PSoqIiwiZ3JvdXAiOiLikaXnm7Tmkq0iLCJzZWFyY2hGaW5kIjoianM6XG5pZiAoZ2V0SXRlbShcInVpZFwiLCBcIlwiKSA9PSBcIlwiKSB7XG4gICAgdmFyIGQgPSBbXTtcbiAgICBkLnB1c2goe1xuICAgICAgICB0aXRsZTogXCLor7flhYjnmbvpmYZcIixcbiAgICAgICAgdXJsOiBcImhpa2VyOi8vcGFnZS9oaXN0b3J5XCJcbiAgICB9KTtcbn0gZWxzZSB7XG4gICAgc2V0UmVzdWx0KFt7XG4gICAgICAgIHVybDogJ2hpa2VyOi8vc2VhcmNoP3M9JyArIGdldFBhcmFtKFwia3dcIiksXG4gICAgICAgIGV4dHJhOiB7XG4gICAgICAgICAgICBydWxlczogJC50b1N0cmluZygoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGRhdGEgPSBbXTtcbiAgICAgICAgICAgICAgICAkLnJlcXVpcmUoXCJzZWFyY2hcIikuZW5naW5lcy5mb3JFYWNoKChNYXAsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidGl0bGVcIjogTWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzZWFyY2hfdXJsXCI6IGJ1aWxkVXJsKFwiaGlrZXI6Ly9lbXB0eVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga3c6IFwiKipcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiBcImZ5cGFnZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZ2luZTogTWFwXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic2VhcmNoRmluZFwiOiBcImpzOiQucmVxdWlyZSgnaGlrZXI6Ly9wYWdlL3NlYXJjaD9ydWxlPUp1c3RMaXZlJykuc2VhcmNoKClcIlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIHRpdGxlOiBcIuaQnOe0ou+8mlwiICsgZ2V0UGFyYW0oXCJrd1wiKVxuICAgIH1dKVxufVxuc2V0UmVzdWx0KGQpOyIsImRldGFpbF9jb2xfdHlwZSI6Im1vdmllXzEiLCJkZXRhaWxfZmluZF9ydWxlIjoiIiwic2RldGFpbF9jb2xfdHlwZSI6Im1vdmllXzEiLCJzZGV0YWlsX2ZpbmRfcnVsZSI6IiIsInVhIjoibW9iaWxlIiwicHJlUnVsZSI6IiIsInBhZ2VzIjoiW3tcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLkuoznuqdcIixcInBhdGhcIjpcImRldGFpbFwiLFwicnVsZVwiOlwianM6XFxubGV0IGQgPSBbXTtcXG5sZXQgcyA9IFtdO1xcbnMucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwiPGJyPjxicj48YnI+PGJyPjxicj5cXFwiLFxcbiAgICBjb2xfdHlwZTogXFxcInJpY2hfdGV4dFxcXCIsXFxuICAgIGV4dHJhOiB7XFxuICAgICAgICBjbHM6IFxcXCJjbHNfbG9hZFxcXCJcXG4gICAgfVxcbn0sIHtcXG4gICAgaW1nOiBcXFwiaHR0cHM6Ly9oaWtlcmZhbnMuY29tL3dlaXN5ci9pbWcvTG9hZGluZzEuZ2lmXFxcIixcXG4gICAgdXJsOiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCIsXFxuICAgIGNvbF90eXBlOiBcXFwicGljXzFfY2VudGVyXFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIGNsczogXFxcImNsc19sb2FkXFxcIlxcbiAgICB9XFxufSk7XFxuc2V0UHJlUmVzdWx0KHMpO1xcblxcbmxldCBhcGkgPSBcXFwiaHR0cDovL3lqMTIxMS53b3JrOjgwMTMvYXBpL2xpdmUvXFxcIjtcXG5sZXQgdWlkID0gZ2V0SXRlbShcXFwidWlkXFxcIiwgXFxcIlxcXCIpO1xcbmxldCBwbGF0Zm9ybSA9IGdldFBhcmFtKFxcXCJwbGF0Zm9ybVxcXCIpO1xcbmxldCByb29taWQgPSBnZXRQYXJhbShcXFwicm9vbUlkXFxcIik7XFxubGV0IGhlYWRlcnMgPSB7XFxuICAgIGhlYWRlcnM6IHtcXG4gICAgICAgIFxcXCJVc2VyLUFnZW50XFxcIjogXFxcIm9raHR0cC8zLjEyLjEzXFxcIlxcbiAgICB9XFxufTtcXG5cXG5sZXQgcmVzID0gSlNPTi5wYXJzZShyZXF1ZXN0KGFwaSArIFxcXCJnZXRSb29tSW5mbz91aWQ9XFxcIiArIHVpZCArIFxcXCImcGxhdGZvcm09XFxcIiArIHBsYXRmb3JtICsgXFxcIiZyb29tSWQ9XFxcIiArIHJvb21pZCwgaGVhZGVycykpO1xcblxcbmlmIChwbGF0Zm9ybSA9PSBcXFwiZG91eXVcXFwiKSB7XFxuICAgIHZhciB1cmwgPSBcXFwiaHR0cHM6Ly9tLmRvdXl1LmNvbS9cXFwiICsgcm9vbWlkO1xcbn0gZWxzZSBpZiAocGxhdGZvcm0gPT0gXFxcImh1eWFcXFwiKSB7XFxuICAgIHZhciB1cmwgPSBcXFwiaHR0cHM6Ly9tLmh1eWEuY29tL1xcXCIgKyByb29taWQ7XFxufSBlbHNlIGlmIChwbGF0Zm9ybSA9PSBcXFwiYmlsaWJpbGlcXFwiKSB7XFxuICAgIHZhciB1cmwgPSBcXFwiaHR0cHM6Ly9saXZlLmJpbGliaWxpLmNvbS9oNS9cXFwiICsgcm9vbWlkO1xcbn0gZWxzZSBpZiAocGxhdGZvcm0gPT0gXFxcImRvdXlpblxcXCIpIHtcXG4gICAgdmFyIHVybCA9IFxcXCJodHRwczovL2xpdmUuZG91eWluLmNvbS9cXFwiICsgcm9vbWlkO1xcbn0gZWxzZSB7XFxuICAgIHZhciB1cmwgPSBcXFwiaHR0cHM6Ly9oNS5jYy4xNjMuY29tL2NjL1xcXCIgKyByb29taWQ7XFxufTtcXG5cXG5sZXQgcm9vbXBpYyA9IHJlcy5kYXRhLnJvb21QaWM7XFxubGV0IG93bmVycGljID0gcmVzLmRhdGEub3duZXJIZWFkUGljO1xcbmxldCBwbGF0ID0gcGxhdGZvcm0ucmVwbGFjZSgnaHV5YScsICfomY7niZknKS5yZXBsYWNlKCdkb3V5dScsICfmlpfpsbwnKS5yZXBsYWNlKCdjYycsICfnvZHmmJNDQycpLnJlcGxhY2UoXFxcImJpbGliaWxpXFxcIiwgXFxcIuWTlOWTqVxcXCIpLnJlcGxhY2UoXFxcImRvdXlpblxcXCIsIFxcXCLmipbpn7NcXFwiKTtcXG5sZXQgY2F0ZWdvcnkgPSByZXMuZGF0YS5jYXRlZ29yeU5hbWU7XFxubGV0IExpdmUgPSByZXMuZGF0YS5pc0xpdmUgPT0gMSA/IFxcXCLnm7Tmkq3kuK1cXFwiIDogXFxcIuacquebtOaSrVxcXCI7XFxubGV0IGNjbHMgPSBNWV9QQVJBTVMuY2xzO1xcbmxldCDkuIcgPSAhL2Nscy1ob21lLy50ZXN0KGNjbHMpID8gXFxcIuS4h+eyieS4nVxcXCIgOiBcXFwi5LiHXFxcIjtcXG5sZXQg5Lq6ID0gIS9jbHMtaG9tZS8udGVzdChjY2xzKSA/IFxcXCLnsonkuJ1cXFwiIDogXFxcIuS6ulxcXCI7XFxubGV0IG9ubGluZSA9IHJlcy5kYXRhLm9ubGluZTtcXG5sZXQgbGluZSA9IG9ubGluZSA+PSBcXFwiMTAwMDBcXFwiID8gKG9ubGluZSAvIDEwMDAwKS50b0ZpeGVkKDEpICsg5LiHIDogb25saW5lICsg5Lq6O1xcblxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiByZXMuZGF0YS5vd25lck5hbWUsXFxuICAgIGltZzogKHJvb21waWMgIT09IFxcXCJcXFwiID8gcm9vbXBpYyA6IG93bmVycGljKSArIFxcXCJAUmVmZXJlcj1cXFwiLFxcbiAgICBkZXNjOiBcXFwi5YiG5Yy677yaXFxcIiArIHBsYXQgKyAoY2F0ZWdvcnkgIT09IFxcXCJcXFwiID8gXFxcIsK3XFxcIiArIGNhdGVnb3J5IDogXFxcIlxcXCIpICsgXFxcIlxcXFxu54q25oCB77yaXFxcIiArIExpdmUgKyBcXFwiwrdcXFwiICsgbGluZSArIFxcXCJcXFxcbueCueWHu+S4i+aWueS4u+aSreWktOWDj+i/m+WFpeWumOe9kVxcXCIsXFxuICAgIHVybDogcm9vbXBpYyAhPT0gXFxcIlxcXCIgPyByb29tcGljIDogb3duZXJwaWMsXFxuICAgIGNvbF90eXBlOiAnbW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1cicsXFxuICAgIGV4dHJhOiB7XFxuICAgICAgICBncmFkaWVudDogdHJ1ZVxcbiAgICB9XFxufSwge1xcbiAgICB0aXRsZTogcmVzLmRhdGEub3duZXJOYW1lLFxcbiAgICBpbWc6IG93bmVycGljICsgXFxcIkBSZWZlcmVyPVxcXCIsXFxuICAgIHVybDogdXJsLFxcbiAgICBjb2xfdHlwZTogXFxcImljb25fMl9yb3VuZFxcXCJcXG59KTtcXG5cXG5kLnB1c2goe1xcbiAgICB0aXRsZTogZ2V0SXRlbShwbGF0Zm9ybSArIHJvb21pZCwgXFxcIjBcXFwiKSA9PSAxID8gXFxcIuW3suWFs+azqFxcXCIgOiBcXFwi5pyq5YWz5rOoXFxcIixcXG4gICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKChhcGksIHVpZCwgaGVhZGVycywgcm9vbWlkLCBwbGF0Zm9ybSkgPT4ge1xcbiAgICAgICAgaWYgKGdldEl0ZW0ocGxhdGZvcm0gKyByb29taWQsIFxcXCIwXFxcIikgPT0gXFxcIjBcXFwiKSB7XFxuICAgICAgICAgICAgdmFyIGZvbGwgPSBcXFwiZm9sbG93XFxcIjtcXG4gICAgICAgICAgICBzZXRJdGVtKHBsYXRmb3JtICsgcm9vbWlkLCBcXFwiMVxcXCIpO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICB2YXIgZm9sbCA9IFxcXCJ1bkZvbGxvd1xcXCI7XFxuICAgICAgICAgICAgY2xlYXJJdGVtKHBsYXRmb3JtICsgcm9vbWlkKTtcXG4gICAgICAgIH07XFxuICAgICAgICBsZXQgdGl0ID0gZ2V0SXRlbShwbGF0Zm9ybSArIHJvb21pZCwgXFxcIjBcXFwiKTtcXG4gICAgICAgIHVwZGF0ZUl0ZW0oXFxcImlkX2lzRm9sbG93ZWRcXFwiLCB7XFxuICAgICAgICAgICAgdGl0bGU6IHRpdCA9PSAxID8gXFxcIuW3suWFs+azqFxcXCIgOiBcXFwi5pyq5YWz5rOoXFxcIlxcbiAgICAgICAgfSk7XFxuICAgICAgICBsZXQgcmUgPSBKU09OLnBhcnNlKHJlcXVlc3QoYXBpICsgZm9sbCArIFxcXCI/cGxhdGZvcm09XFxcIiArIHBsYXRmb3JtICsgXFxcIiZyb29tSWQ9XFxcIiArIHJvb21pZCArIFxcXCImdWlkPVxcXCIgKyB1aWQsIGhlYWRlcnMpKTtcXG5cXG4gICAgICAgIGxldCBsaXN0ID0gZmluZEl0ZW1zQnlDbHMoXFxcImNsc19TdWJzXFxcIikgfHwgW107XFxuICAgICAgICBpZiAobGlzdC5sZW5ndGggPT0gMCkge1xcbiAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/msqHmnInojrflj5bliLDliJfooahcXFwiXFxuICAgICAgICB9O1xcbiAgICAgICAgZm9yIChsZXQgaSBpbiBsaXN0KSB7XFxuICAgICAgICAgICAgbGV0IGxpID0gbGlzdFtpXTtcXG4gICAgICAgICAgICBsZXQgY2xzID0gbGkuZXh0cmEuY2xzO1xcbiAgICAgICAgICAgIGxldCBqczIgPSBsaS5leHRyYS5sb25nQ2xpY2tbMV0uanM7XFxuICAgICAgICAgICAgdXBkYXRlSXRlbShcXFwiaWRfXFxcIiArIHBsYXRmb3JtICsgcm9vbWlkLCB7XFxuICAgICAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgICAgICBjbHM6IGNscyxcXG4gICAgICAgICAgICAgICAgICAgIGlkOiBcXFwiaWRfXFxcIiArIHBsYXRmb3JtICsgcm9vbWlkLFxcbiAgICAgICAgICAgICAgICAgICAgbGluZVZpc2libGU6IGZhbHNlLFxcbiAgICAgICAgICAgICAgICAgICAgbG9uZ0NsaWNrOiBbe1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXQgPT0gXFxcIjFcXFwiID8gXFxcIuW3suWFs+azqFxcXCIgOiBcXFwi5pyq5YWz5rOoXFxcIixcXG4gICAgICAgICAgICAgICAgICAgICAgICBqczogJC5yZXF1aXJlKFxcXCJwdWJsaWNcXFwiKS5QdWJsaWMuTG9uZ0NsaWNrKGFwaSwgdWlkLCByb29taWQsIHBsYXRmb3JtKSxcXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXFxcIuWumOe9kemTvuaOpVxcXCIsXFxuICAgICAgICAgICAgICAgICAgICAgICAganM6IGpzMlxcbiAgICAgICAgICAgICAgICAgICAgfV1cXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgICAgIGlmIChnZXRNeVZhcihcXFwic1R5cGVcXFwiLCBcXFwiXFxcIikgIT09IFxcXCJcXFwiICYmIHRpdCA9PSAwKSB7XFxuICAgICAgICAgICAgICAgIGRlbGV0ZUl0ZW0oXFxcImlkX1xcXCIgKyBwbGF0Zm9ybSArIHJvb21pZCk7XFxuICAgICAgICAgICAgfTtcXG4gICAgICAgIH07XFxuICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8vXFxcIiArIHJlLmRhdGE7XFxuICAgIH0sIGFwaSwgdWlkLCBoZWFkZXJzLCByb29taWQsIHBsYXRmb3JtKSxcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzJcXFwiLFxcbiAgICBleHRyYToge1xcbiAgICAgICAgaWQ6IFxcXCJpZF9pc0ZvbGxvd2VkXFxcIlxcbiAgICB9XFxufSwge1xcbiAgICBjb2xfdHlwZTogXFxcImxpbmVfYmxhbmtcXFwiXFxufSwge1xcbiAgICB0aXRsZTogXFxcIumAieaLqee6v+i3r1xcXCIsXFxuICAgIHVybDogXFxcImhpa2VyOi8vZW1wdHlcXFwiLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfY2VudGVyXzFcXFwiXFxufSk7XFxuXFxuZnVuY3Rpb24gTGl2ZXMoaXNMaXZlKSB7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICBkZXNjOiBpc0xpdmUgPT0gMCA/IFxcXCLnm7QgICDmkq0gICDlt7IgICDnu5MgICDmnZ9cXFwiIDogXFxcIuebtCAgIOaSrSAgIOW3siAgIOe7kyAgIOadn1xcXFxuXFxcXG7miJYgIOayoSAg5pyJICDojrcgIOWPliAg5YiwICDmlbAgIOaNrlxcXCIsXFxuICAgICAgICB1cmw6IFxcXCJoaWtlcjovL2VtcHR5XFxcIixcXG4gICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF9jZW50ZXJfMVxcXCIsXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgIGxpbmVWaXNpYmxlOiBmYWxzZVxcbiAgICAgICAgfVxcbiAgICB9KVxcbn07XFxubGV0IGlzTGl2ZSA9IHJlcy5kYXRhLmlzTGl2ZTtcXG5pZiAoaXNMaXZlID09IDApIHtcXG4gICAgTGl2ZXMoaXNMaXZlKTtcXG59IGVsc2Uge1xcbiAgICBsZXQganNvbiA9IEpTT04ucGFyc2UoZmV0Y2goYXBpICsgXFxcImdldFJlYWxVcmxNdWx0aVNvdXJjZT9wbGF0Zm9ybT1cXFwiICsgcGxhdGZvcm0gKyBcXFwiJnJvb21JZD1cXFwiICsgcm9vbWlkLCBoZWFkZXJzKSkuZGF0YSB8fCBbXTtcXG4gICAgaWYgKE9iamVjdC5rZXlzKGpzb24pLmxlbmd0aCAhPT0gMCkge1xcbiAgICAgICAgZm9yIChsZXQgeGwgaW4ganNvbikge1xcbiAgICAgICAgICAgIGQucHVzaCh7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiB4bCxcXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzJcXFwiLFxcbiAgICAgICAgICAgICAgICB1cmw6ICQoJyNub0xvYWRpbmcjJykubGF6eVJ1bGUoKGxpc3QsIG1pZCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5hbWUgPSBbXTtcXG4gICAgICAgICAgICAgICAgICAgIGxldCB1cmxzID0gW11cXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gbGlzdCkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaSA9IGxpc3RbaV07XFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5wdXNoKGxpLnF1YWxpdHlOYW1lKVxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybHMucHVzaChsaS5wbGF5VXJsKVxcbiAgICAgICAgICAgICAgICAgICAgfTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh1cmxzKSAhPT0gJ1tcXFwiXFxcIl0nID8gSlNPTi5zdHJpbmdpZnkoe1xcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzOiBuYW1lLFxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybHM6IHVybHMsXFxuICAgICAgICAgICAgICAgICAgICAgICAgZGFubXU6IC9kb3V5deaaguaXoC8udGVzdCh1cmxzKSA/IFxcXCJ3ZWI6Ly9odHRwOi8vZG91eXVfZGFubXUuZGV2LnR5cmFudGcuY29tLz9yaWQ9XFxcIiArIG1pZCArIFxcXCImdmVyPTFcXFwiIDogXFxcIlxcXCJcXG4gICAgICAgICAgICAgICAgICAgIH0pIDogXFxcInRvYXN0Oi8v55u05pKt5bey57uT5p2f5oiW5rKh5pyJ6I635Y+W5Yiw5pWw5o2uXFxcIlxcbiAgICAgICAgICAgICAgICB9LCBqc29uW3hsXSwgcm9vbWlkKVxcbiAgICAgICAgICAgIH0pXFxuICAgICAgICB9O1xcbiAgICB9IGVsc2Uge1xcbiAgICAgICAgTGl2ZXMoaXNMaXZlKTtcXG4gICAgfTtcXG59O1xcbmRlbGV0ZUl0ZW1CeUNscyhcXFwiY2xzX2xvYWRcXFwiKTtcXG5zZXRSZXN1bHQoZCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLlhbPms6jliJfooahcIixcInBhdGhcIjpcImhpc3RvcnlcIixcInJ1bGVcIjpcImpzOlxcbmFkZExpc3RlbmVyKCdvbkNsb3NlJywgJC50b1N0cmluZygoKSA9PiB7XFxuICAgIGNsZWFyTXlWYXIoJ3NUeXBlJyk7XFxuICAgIGNsZWFyTXlWYXIoJ3N1YnMnKTtcXG59KSk7XFxubGV0IHMgPSBbXTtcXG5sZXQgZCA9IFtdO1xcbnNldFBhZ2VUaXRsZShcXFwi5YWz5rOoXFxcIik7XFxubGV0IGFwaSA9IFxcXCJodHRwOi8veWoxMjExLndvcms6ODAxMy9hcGkvbGl2ZS9cXFwiO1xcbmxldCB1aWQgPSBnZXRJdGVtKFxcXCJ1aWRcXFwiLCBcXFwiXFxcIik7XFxubGV0IGhlYWRlcnMgPSB7XFxuICAgIGhlYWRlcnM6IHtcXG4gICAgICAgIFxcXCJVc2VyLUFnZW50XFxcIjogXFxcIm9raHR0cC8zLjEyLjEzXFxcIlxcbiAgICB9XFxufTtcXG5sZXQgb2ZmID0gXFxcImh0dHBzOi8vaGlrZXJmYW5zLmNvbS90dWJpYW8vbWVzc3kvNjMuc3ZnXFxcIjtcXG5sZXQgb24gPSBcXFwiaHR0cHM6Ly9oaWtlcmZhbnMuY29tL3R1Ymlhby9tZXNzeS81NS5zdmdcXFwiO1xcbmxldCB6YyA9IGdldE15VmFyKFxcXCJ6dWNlXFxcIiwgXFxcIuazqCDlhoxcXFwiKTtcXG5zLnB1c2goe1xcbiAgICB0aXRsZTogZ2V0SXRlbShcXFwibmlja25hbWVcXFwiLCB6YyksXFxuICAgIHVybDogdWlkID09IFxcXCJcXFwiID8gJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgoemMpID0+IHtcXG4gICAgICAgIHB1dE15VmFyKFxcXCJ6dWNlXFxcIiwgemMgPT0gXFxcIuazqCDlhoxcXFwiID8gXFxcIueZuyDlvZVcXFwiIDogXFxcIuazqCDlhoxcXFwiKTtcXG4gICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgIH0sIHpjKSA6ICQoXFxcIuaYr+WQpuazqOmUgO+8n1xcXCIpLmNvbmZpcm0oKCkgPT4ge1xcbiAgICAgICAgY2xlYXJJdGVtKFxcXCJ1aWRcXFwiKTtcXG4gICAgICAgIGNsZWFySXRlbShcXFwiYWNjb3VudFxcXCIpO1xcbiAgICAgICAgY2xlYXJJdGVtKFxcXCJwYXNzd29yZFxcXCIpO1xcbiAgICAgICAgY2xlYXJJdGVtKFxcXCJuaWNrbmFtZVxcXCIpO1xcbiAgICAgICAgY2xlYXJJdGVtKFxcXCJ1c2VybmFtZVxcXCIpO1xcbiAgICAgICAgYmFjayh0cnVlKTtcXG4gICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/ms6jplIDmiJDlip9cXFwiO1xcbiAgICB9KSxcXG4gICAgaW1nOiBcXFwiaHR0cHM6Ly9oaWtlcmZhbnMuY29tL3R1Ymlhby9rZS83My5wbmdcXFwiLFxcbiAgICBjb2xfdHlwZTogXFxcImljb25fMlxcXCJcXG59LCB7XFxuICAgIHRpdGxlOiBcXFwi5aSa57q/6LevXFxcIixcXG4gICAgaW1nOiBnZXRJdGVtKFxcXCJtdWx0aWxpbmVcXFwiLCBcXFwiMFxcXCIpID09IFxcXCIwXFxcIiA/IG9mZiA6IG9uLFxcbiAgICBjb2xfdHlwZTogXFxcImljb25fMlxcXCIsXFxuICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgoYXBpLCBvbiwgb2ZmKSA9PiB7XFxuICAgICAgICBpZiAoZ2V0SXRlbShcXFwibXVsdGlsaW5lXFxcIiwgXFxcIjBcXFwiKSA9PSBcXFwiMFxcXCIpIHtcXG4gICAgICAgICAgICBzZXRJdGVtKFxcXCJtdWx0aWxpbmVcXFwiLCBcXFwiMVxcXCIpO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICBjbGVhckl0ZW0oXFxcIm11bHRpbGluZVxcXCIpO1xcbiAgICAgICAgfTtcXG4gICAgICAgIGxldCBtdWwgPSBnZXRJdGVtKFxcXCJtdWx0aWxpbmVcXFwiLCBcXFwiMFxcXCIpO1xcbiAgICAgICAgdXBkYXRlSXRlbShcXFwiaWRfbXVsdGlsaW5lXFxcIiwge1xcbiAgICAgICAgICAgIGltZzogbXVsID09IFxcXCIwXFxcIiA/IG9mZiA6IG9uXFxuICAgICAgICB9KTtcXG4gICAgICAgIGxldCBjbGxzID0gZ2V0TXlWYXIoXFxcIk15a2V5XFxcIiwgXFxcIlxcXCIpICE9PSBcXFwiXFxcIiA/IFxcXCJjbHMtc29cXFwiIDogXFxcImNscy1ob21lXFxcIjtcXG4gICAgICAgIGxldCBob21lID0gZmluZEl0ZW1zQnlDbHMoY2xscykgfHwgW107XFxuICAgICAgICBsZXQgU3VicyA9IGZpbmRJdGVtc0J5Q2xzKFxcXCJjbHMtU3Vic1xcXCIpIHx8IFtdO1xcbiAgICAgICAgaWYgKFN1YnMubGVuZ3RoID09IDAgfHwgaG9tZS5sZW5ndGggPT0gMCkge1xcbiAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/msqHmnInojrflj5bliLDliJfooahcXFwiXFxuICAgICAgICB9O1xcblxcbiAgICAgICAgZnVuY3Rpb24gZHhsc3goUykge1xcbiAgICAgICAgICAgIGxldCBpc0xpdmUgPSBTLmV4dHJhLmlzTGl2ZTtcXG4gICAgICAgICAgICBsZXQgZm9ybSA9IFMudXJsLm1hdGNoKC9wbGF0Zm9ybT0oLiopJi8pWzFdO1xcbiAgICAgICAgICAgIGxldCBtaWQgPSAvaGlrZXIvLnRlc3QoUy51cmwpID8gUy51cmwuc3BsaXQoXFxcInJvb21JZD1cXFwiKVsxXSA6IFMudXJsLnNwbGl0KFxcXCJyb29tSWQ9XFxcIilbMV0uc3BsaXQoXFxcIkBcXFwiKVswXTtcXG4gICAgICAgICAgICBsZXQgdXJsID0gbXVsID09IFxcXCIwXFxcIiA/IGFwaSArIFxcXCJnZXRSZWFsVXJsTXVsdGlTb3VyY2U/cGxhdGZvcm09XFxcIiArIGZvcm0gKyBcXFwiJnJvb21JZD1cXFwiICsgbWlkICsgJC5yZXF1aXJlKFxcXCJwdWJsaWNcXFwiKS5QdWJsaWMuTGF6eShpc0xpdmUpIDogXFxcImhpa2VyOi8vcGFnZS9kZXRhaWw/I2ltbWVyc2l2ZVRoZW1lIyZwbGF0Zm9ybT1cXFwiICsgZm9ybSArIFxcXCImcm9vbUlkPVxcXCIgKyBtaWQ7XFxuICAgICAgICAgICAgdXBkYXRlSXRlbShcXFwiaWRfXFxcIiArIGZvcm0gKyBtaWQsIHtcXG4gICAgICAgICAgICAgICAgdXJsOiB1cmxcXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgIH07XFxuICAgICAgICBmb3IgKGxldCBzIGluIFN1YnMpIHtcXG4gICAgICAgICAgICBsZXQgUyA9IFN1YnNbc107XFxuICAgICAgICAgICAgZHhsc3goUyk7XFxuICAgICAgICB9O1xcbiAgICAgICAgZm9yIChsZXQgaCBpbiBob21lKSB7XFxuICAgICAgICAgICAgbGV0IEggPSBob21lW2hdO1xcbiAgICAgICAgICAgIGR4bHN4KEgpO1xcbiAgICAgICAgfTtcXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgIH0sIGFwaSwgb24sIG9mZiksXFxuICAgIGV4dHJhOiB7XFxuICAgICAgICBpZDogXFxcImlkX211bHRpbGluZVxcXCJcXG4gICAgfVxcbn0pXFxuaWYgKHVpZCA9PSBcXFwiXFxcIikge1xcbiAgICBpZiAoemMgPT0gXFxcIueZuyDlvZVcXFwiKSB7XFxuICAgICAgICBzLnB1c2goe1xcbiAgICAgICAgICAgIGRlc2M6IFxcXCLmmLXnp7Ag77yIMS0yMOS9je+8iVxcXCIsXFxuICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U6IFxcXCJzZXRJdGVtKCduaWNrJyxpbnB1dClcXFwiLFxcbiAgICAgICAgICAgICAgICB0aXRsZVZpc2libGU6IGZhbHNlXFxuICAgICAgICAgICAgfSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcImlucHV0XFxcIlxcbiAgICAgICAgfSlcXG4gICAgfTtcXG4gICAgcy5wdXNoKHtcXG4gICAgICAgIGRlc2M6IFxcXCLotKblj7cg77yINi0yMOS9jeaVsOWtl+aIluiLseaWh++8iVxcXCIsXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgIG9uQ2hhbmdlOiBcXFwic2V0SXRlbSgnYWNjb3VudCcsaW5wdXQpXFxcIixcXG4gICAgICAgICAgICB0aXRsZVZpc2libGU6IGZhbHNlXFxuICAgICAgICB9LFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJpbnB1dFxcXCJcXG4gICAgfSwge1xcbiAgICAgICAgZGVzYzogXFxcIuWvhueggSDvvIg2LTIw5L2N5pWw5a2X5oiW6Iux5paH77yJXFxcIixcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgb25DaGFuZ2U6IFxcXCJzZXRJdGVtKCdwYXNzd29yZCcsaW5wdXQpXFxcIixcXG4gICAgICAgICAgICB0aXRsZVZpc2libGU6IGZhbHNlXFxuICAgICAgICB9LFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJpbnB1dFxcXCJcXG4gICAgfSwge1xcbiAgICAgICAgdGl0bGU6IHpjID09IFxcXCLms6gg5YaMXFxcIiA/IFxcXCLnmbsgIOW9lVxcXCIgOiBcXFwi5rOoIOWGjFxcXCIsXFxuICAgICAgICB1cmw6ICQoJyNub0xvYWRpbmcjJykubGF6eVJ1bGUoKHpjKSA9PiB7XFxuICAgICAgICAgICAgbGV0IHJlZ2luID0gemMgPT0gXFxcIueZuyDlvZVcXFwiID8gXFxcInJlZ2lzdGVyXFxcIiA6IFxcXCJsb2dpblxcXCI7XFxuICAgICAgICAgICAgbGV0IG5pY2sgPSB6YyA9PSBcXFwi55m7IOW9lVxcXCIgPyBcXFwiJm5pY2tuYW1lPVxcXCIgKyBnZXRJdGVtKFxcXCJuaWNrXFxcIiwgXFxcIlxcXCIpIDogXFxcIlxcXCI7XFxuICAgICAgICAgICAgbGV0IGFjY291bnQgPSBnZXRJdGVtKFxcXCJhY2NvdW50XFxcIiwgXFxcIlxcXCIpO1xcbiAgICAgICAgICAgIGxldCBwYXNzd29yZCA9IGdldEl0ZW0oXFxcInBhc3N3b3JkXFxcIiwgXFxcIlxcXCIpO1xcbiAgICAgICAgICAgIGlmIChhY2NvdW50ID09IFxcXCJcXFwiIHx8IHBhc3N3b3JkID09IFxcXCJcXFwiKSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/luJDlj7fmiJblr4bnoIHkuI3og73kuLrnqbrvvIFcXFwiO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIGxldCBjb29raWVzID0gSlNPTi5wYXJzZShwb3N0KFxcXCJodHRwOi8veWoxMjExLndvcms6ODAxMy9hcGkvXFxcIiArIHJlZ2luICsgXFxcIj91c2VybmFtZT1cXFwiICsgYWNjb3VudCArIG5pY2sgKyBcXFwiJnBhc3N3b3JkPVxcXCIgKyBtZDUocGFzc3dvcmQpLCB7XFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxcIlVzZXItQWdlbnRcXFwiOiBcXFwib2todHRwLzMuMTIuMTNcXFwiXFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH0pKTtcXG4gICAgICAgICAgICAgICAgLy9sb2coY29va2llcylcXG4gICAgICAgICAgICAgICAgaWYgKGNvb2tpZXMuY29kZSA9PSAyMDApIHtcXG4gICAgICAgICAgICAgICAgICAgIHNldEl0ZW0oXFxcInVpZFxcXCIsIGNvb2tpZXMuZGF0YS51aWQpO1xcbiAgICAgICAgICAgICAgICAgICAgc2V0SXRlbShcXFwibmlja25hbWVcXFwiLCBjb29raWVzLmRhdGEubmlja05hbWUpO1xcbiAgICAgICAgICAgICAgICAgICAgc2V0SXRlbShcXFwidXNlcm5hbWVcXFwiLCBjb29raWVzLmRhdGEudXNlck5hbWUpO1xcbiAgICAgICAgICAgICAgICAgICAgYmFjaygpO1xcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJdGVtKFxcXCJuaWNrXFxcIik7XFxuICAgICAgICAgICAgICAgICAgICBjbGVhck15VmFyKFxcXCJ6dWNlXFxcIik7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gemMgPT0gXFxcIueZuyDlvZVcXFwiID8gXFxcInRvYXN0Oi8v5rOo5YaM5oiQ5Yqf77yM5bey55m75b2VXFxcIiA6IFxcXCJ0b2FzdDovL+eZu+W9leaIkOWKn1xcXCI7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICBpZiAoemMgPT0gXFxcIueZuyDlvZVcXFwiKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL1xcXCIgKyBjb29raWVzLm1lc3NhZ2U7XFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySXRlbShcXFwibmlja25hbWVcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckl0ZW0oXFxcInVzZXJuYW1lXFxcIik7XFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJdGVtKFxcXCJ1aWRcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v55m76ZmG5aSx6LSl77yM5Y+v6IO95piv55So5oi35ZCN5oiW5a+G56CB5pyJ6K+vXFxcIjtcXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgfTtcXG4gICAgICAgICAgICB9O1xcbiAgICAgICAgfSwgemMpLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0X2NlbnRlcl8xXFxcIixcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgbGluZVZpc2libGU6IGZhbHNlXFxuICAgICAgICB9XFxuICAgIH0pXFxufTtcXG5zLnB1c2goe1xcbiAgICBjb2xfdHlwZTogXFxcImJpZ19ibGFua19ibG9ja1xcXCJcXG59LCB7XFxuICAgIGNvbF90eXBlOiBcXFwibGluZV9ibGFua1xcXCJcXG59LCB7XFxuICAgIGNvbF90eXBlOiBcXFwiYmlnX2JsYW5rX2Jsb2NrXFxcIixcXG59KTtcXG5sZXQgcGxhY2UgPSBcXFwiU3Vic1xcXCI7XFxubGV0IHNUeXBlID0gZ2V0TXlWYXIoXFxcInNUeXBlXFxcIik7XFxuXFxucy5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCLmiJHnmoTlhbPms6hcXFwiLFxcbiAgICBpbWc6IFxcXCJodHRwczovL2hpa2VyZmFucy5jb20vdHViaWFvL3EvMTAzLnBuZ1xcXCIsXFxuICAgIGRlc2M6IHNUeXBlID09IFxcXCJsaXZpbmdcXFwiID8gXFxcIuebtOaSreS4rVxcXFx0XFxcIiA6IFxcXCLmnKrnm7Tmkq1cXFxcdFxcXCIsXFxuICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgoYXBpLCB1aWQsIHBsYWNlKSA9PiB7XFxuICAgICAgICBpZiAoZ2V0TXlWYXIoXFxcInNUeXBlXFxcIikgPT0gXFxcImxpdmluZ1xcXCIpIHtcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFwic1R5cGVcXFwiLCBcXFwib3V0bGluZVxcXCIpO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFwic1R5cGVcXFwiLCBcXFwibGl2aW5nXFxcIik7XFxuICAgICAgICB9O1xcblxcbiAgICAgICAgbGV0IHNUeXAgPSBnZXRNeVZhcihcXFwic1R5cGVcXFwiKTtcXG4gICAgICAgIHVwZGF0ZUl0ZW0oXFxcImlkX2d6YnRcXFwiLCB7XFxuICAgICAgICAgICAgZGVzYzogc1R5cCA9PSBcXFwibGl2aW5nXFxcIiA/IFxcXCLnm7Tmkq3kuK1cXFxcdFxcXCIgOiBcXFwi5pyq55u05pKtXFxcXHRcXFwiXFxuICAgICAgICB9KTtcXG5cXG4gICAgICAgIGRlbGV0ZUl0ZW1CeUNscyhcXFwiY2xzLVN1YnNcXFwiKTtcXG4gICAgICAgIGxldCByZXMgPSBzdG9yYWdlMC5nZXRNeVZhcihcXFwic3Vic1xcXCIpO1xcbiAgICAgICAgbGV0IHN1ID0gW107XFxuICAgICAgICBmb3IgKGxldCBpIGluIHJlcykge1xcbiAgICAgICAgICAgIGxldCB0ZW1wID0gcmVzW2ldO1xcbiAgICAgICAgICAgIGlmIChzVHlwID09IFxcXCJsaXZpbmdcXFwiKSB7XFxuICAgICAgICAgICAgICAgIGlmICh0ZW1wLmlzTGl2ZSA9PSAxKSB7XFxuICAgICAgICAgICAgICAgICAgICAkLnJlcXVpcmUoXFxcInB1YmxpY1xcXCIpLlB1YmxpYy5MaXN0cyhhcGksIHVpZCwgcGxhY2UsIHN1LCB0ZW1wLnJvb21JZCwgdGVtcC5wbGF0Rm9ybSwgdGVtcC5vd25lck5hbWUsIHRlbXAuY2F0ZWdvcnlOYW1lLCB0ZW1wLm9ubGluZSwgdGVtcC5yb29tUGljLCB0ZW1wLmlzTGl2ZSk7XFxuICAgICAgICAgICAgICAgIH07XFxuICAgICAgICAgICAgfSBlbHNlXFxuICAgICAgICAgICAgaWYgKHRlbXAuaXNMaXZlID09IDAgJiYgdGVtcC5wbGF0Rm9ybSAhPT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICAkLnJlcXVpcmUoXFxcInB1YmxpY1xcXCIpLlB1YmxpYy5MaXN0cyhhcGksIHVpZCwgcGxhY2UsIHN1LCB0ZW1wLnJvb21JZCwgdGVtcC5wbGF0Rm9ybSwgdGVtcC5vd25lck5hbWUsIHRlbXAuY2F0ZWdvcnlOYW1lLCB0ZW1wLm9ubGluZSwgdGVtcC5vd25lckhlYWRQaWMsIHRlbXAuaXNMaXZlKTtcXG4gICAgICAgICAgICB9O1xcbiAgICAgICAgfTtcXG4gICAgICAgIGFkZEl0ZW1BZnRlcihcXFwiaWRfZ3psYlxcXCIsIHN1KTtcXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgIH0sIGFwaSwgdWlkLCBwbGFjZSksXFxuICAgIGNvbF90eXBlOiBcXFwiYXZhdGFyXFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIGlkOiBcXFwiaWRfZ3pidFxcXCJcXG4gICAgfVxcbn0pXFxuXFxucy5wdXNoKHtcXG4gICAgY29sX3R5cGU6IFxcXCJsaW5lXFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIGlkOiBcXFwiaWRfZ3psYlxcXCJcXG4gICAgfVxcbn0pO1xcbnMucHVzaCh7XFxuICAgIGNvbF90eXBlOiBcXFwicmljaF90ZXh0XFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIGNsczogXFxcImNsc19sb2FkXFxcIlxcbiAgICB9XFxufSwge1xcbiAgICBpbWc6IFxcXCJodHRwczovL2hpa2VyZmFucy5jb20vd2Vpc3lyL2ltZy9Mb2FkaW5nMS5naWZcXFwiLFxcbiAgICB1cmw6IFxcXCJoaWtlcjovL2VtcHR5XFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJwaWNfMV9jZW50ZXJcXFwiLFxcbiAgICBleHRyYToge1xcbiAgICAgICAgY2xzOiBcXFwiY2xzX2xvYWRcXFwiXFxuICAgIH1cXG59KTtcXG5zZXRQcmVSZXN1bHQocyk7XFxuaWYgKHVpZCAhPT0gXFxcIlxcXCIpIHtcXG4gICAgbGV0IHJlcyA9IEpTT04ucGFyc2UocmVxdWVzdChhcGkgKyBcXFwiZ2V0Um9vbXNPbj91aWQ9XFxcIiArIHVpZCwgaGVhZGVycykpLmRhdGE7XFxuICAgIGlmIChyZXMubGVuZ3RoICE9PSAwKSB7XFxuICAgICAgICBzdG9yYWdlMC5wdXRNeVZhcihcXFwic3Vic1xcXCIsIHJlcyk7XFxuICAgICAgICBmb3IgKGxldCBpIGluIHJlcykge1xcbiAgICAgICAgICAgIGxldCB0ZW1wID0gcmVzW2ldO1xcbiAgICAgICAgICAgIGlmIChzVHlwZSA9PSBcXFwibGl2aW5nXFxcIikge1xcbiAgICAgICAgICAgICAgICBpZiAodGVtcC5pc0xpdmUgPT0gMSkge1xcbiAgICAgICAgICAgICAgICAgICAgJC5yZXF1aXJlKFxcXCJwdWJsaWNcXFwiKS5QdWJsaWMuTGlzdHMoYXBpLCB1aWQsIHBsYWNlLCBkLCB0ZW1wLnJvb21JZCwgdGVtcC5wbGF0Rm9ybSwgdGVtcC5vd25lck5hbWUsIHRlbXAuY2F0ZWdvcnlOYW1lLCB0ZW1wLm9ubGluZSwgdGVtcC5yb29tUGljLCB0ZW1wLmlzTGl2ZSk7XFxuICAgICAgICAgICAgICAgIH07XFxuICAgICAgICAgICAgfSBlbHNlXFxuICAgICAgICAgICAgaWYgKHRlbXAuaXNMaXZlID09IDAgJiYgdGVtcC5wbGF0Rm9ybSAhPT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICAkLnJlcXVpcmUoXFxcInB1YmxpY1xcXCIpLlB1YmxpYy5MaXN0cyhhcGksIHVpZCwgcGxhY2UsIGQsIHRlbXAucm9vbUlkLCB0ZW1wLnBsYXRGb3JtLCB0ZW1wLm93bmVyTmFtZSwgdGVtcC5jYXRlZ29yeU5hbWUsIHRlbXAub25saW5lLCB0ZW1wLm93bmVySGVhZFBpYywgdGVtcC5pc0xpdmUpO1xcbiAgICAgICAgICAgIH07XFxuICAgICAgICB9O1xcbiAgICB9IGVsc2Uge1xcbiAgICAgICAgZC5wdXNoKHtcXG4gICAgICAgICAgICBjb2xfdHlwZTogJ3JpY2hfdGV4dCdcXG4gICAgICAgIH0sIHtcXG4gICAgICAgICAgICBkZXNjOiBcXFwi5re7IOWKoCDlhbMg5rOoIOWQjiDlj68g5p+lIOeci1xcXCIsXFxuICAgICAgICAgICAgdXJsOiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCIsXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0X2NlbnRlcl8xXFxcIixcXG4gICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICBsaW5lVmlzaWJsZTogZmFsc2VcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KVxcbiAgICB9O1xcbn0gZWxzZSB7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICBjb2xfdHlwZTogJ3JpY2hfdGV4dCdcXG4gICAgfSwge1xcbiAgICAgICAgZGVzYzogXFxcIueZuyDlvZUg5ZCOIOafpSDnnIsg5YWzIOazqFxcXCIsXFxuICAgICAgICB1cmw6IFxcXCJoaWtlcjovL2VtcHR5XFxcIixcXG4gICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF9jZW50ZXJfMVxcXCIsXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgIGxpbmVWaXNpYmxlOiBmYWxzZVxcbiAgICAgICAgfVxcbiAgICB9KVxcbn07XFxuZGVsZXRlSXRlbUJ5Q2xzKFxcXCJjbHNfbG9hZFxcXCIpO1xcbnNldFJlc3VsdChkKTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIuaAu+WIhuexu1wiLFwicGF0aFwiOlwibmV3Q2xhc3NcIixcInJ1bGVcIjpcImpzOlxcbnZhciBkID0gW107XFxubGV0IHMgPSBbXTtcXG4vKlxcbmFkZExpc3RlbmVyKCdvbkNsb3NlJywgJC50b1N0cmluZygoKSA9PiB7XFxuICAgIC8vY2xlYXJNeVZhcignTXlmbCcpO1xcbiAgICAvL2NsZWFyTXlWYXIoJ015cHQnKTtcXG4gICAgfSkpOyovXFxubGV0IGFwaSA9IFxcXCJodHRwOi8veWoxMjExLndvcms6ODAxMy9hcGkvbGl2ZS9cXFwiO1xcbmxldCBoZWFkZXJzID0ge1xcbiAgICBoZWFkZXJzOiB7XFxuICAgICAgICBcXFwiVXNlci1BZ2VudFxcXCI6IFxcXCJva2h0dHAvMy4xMi4xM1xcXCJcXG4gICAgfVxcbn07XFxubGV0IGltZ+mAieS4rSA9IFxcXCJodHRwczovL2ltZzIuYmFpZHUuY29tL2l0L3U9NjAyMzg1MDIsOTM2MDg4MDI1JmZtPTI1MyZmbXQ9YXV0byZhcHA9MTM4JmY9SlBFRz93PTUwMCZoPTU4MkBSZWZlcmVyPVxcXCI7XFxubGV0IGltZ+acqumAiSA9IFxcXCJodHRwczovL2ltZzAuYmFpZHUuY29tL2l0L3U9OTYwNTQ5MDg0LDMyNDI2OTI4MTcmZm09MjUzJmZtdD1hdXRvJmFwcD0xMzgmZj1KUEVHP3c9NTAwJmg9NTAwQFJlZmVyZXI9XFxcIjtcXG5zLnB1c2goe1xcbiAgICB0aXRsZTogXFxcIueJiOWdl+WIhuexu1xcXCIsXFxuICAgIHVybDogJCgnI25vTG9hZGluZyMnKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgICAgY2xlYXJNeVZhcignTXlmbCcpXFxuICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiXFxuICAgIH0pLFxcbiAgICBpbWc6IGdldE15VmFyKFxcXCJNeWZsXFxcIikgPT0gJycgPyBpbWfpgInkuK0gOiBpbWfmnKrpgIksXFxuICAgIGNvbF90eXBlOiBcXFwiaWNvbl8yXFxcIlxcbn0sIHtcXG4gICAgdGl0bGU6IFxcXCLlubPlj7DliIbnsbtcXFwiLFxcbiAgICB1cmw6ICQoJyNub0xvYWRpbmcjJykubGF6eVJ1bGUoKCkgPT4ge1xcbiAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgIHB1dE15VmFyKFxcXCJNeWZsXFxcIiwgJ3B0JylcXG4gICAgICAgIC8qY2xlYXJNeVZhcignTXlwdCcpKi9cXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCJcXG4gICAgfSksXFxuICAgIGltZzogZ2V0TXlWYXIoXFxcIk15ZmxcXFwiKSA9PSAnJyA/IGltZ+acqumAiSA6IGltZ+mAieS4rSxcXG4gICAgY29sX3R5cGU6IFxcXCJpY29uXzJcXFwiXFxufSk7XFxuXFxuLy/lubPlj7DliIbnsbtcXG5pZiAoZ2V0TXlWYXIoXFxcIk15ZmxcXFwiKSkge1xcbiAgICBsZXQgZnJvID0gXFxcIk15cHRcXFwiO1xcbiAgICAkLnJlcXVpcmUoXFxcInB1YmxpY1xcXCIpLlB1YmxpYy5Gcm9tKHMsIGZybyk7XFxuICAgIHMucHVzaCh7XFxuICAgICAgICBjb2xfdHlwZTogXFxcImJpZ19ibGFua19ibG9ja1xcXCJcXG4gICAgfSwge1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJiaWdfYmxhbmtfYmxvY2tcXFwiXFxuICAgIH0sIHtcXG4gICAgICAgIGNvbF90eXBlOiBcXFwibGluZV9ibGFua1xcXCJcXG4gICAgfSwge1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJiaWdfYmxhbmtfYmxvY2tcXFwiXFxuICAgIH0sIHtcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiYmlnX2JsYW5rX2Jsb2NrXFxcIlxcbiAgICB9KTtcXG59O1xcbnMucHVzaCh7XFxuICAgIGNvbF90eXBlOiBcXFwicmljaF90ZXh0XFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIGNsczogXFxcImNsc19sb2FkXFxcIlxcbiAgICB9XFxufSwge1xcbiAgICBpbWc6IFxcXCJodHRwczovL2hpa2VyZmFucy5jb20vd2Vpc3lyL2ltZy9Mb2FkaW5nMS5naWZcXFwiLFxcbiAgICB1cmw6IFxcXCJoaWtlcjovL2VtcHR5XFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJwaWNfMV9jZW50ZXJcXFwiLFxcbiAgICBleHRyYToge1xcbiAgICAgICAgY2xzOiBcXFwiY2xzX2xvYWRcXFwiXFxuICAgIH1cXG59KTtcXG5zZXRQcmVSZXN1bHQocyk7XFxuXFxuLy/lubPlj7DliJfooahcXG5pZiAoZ2V0TXlWYXIoXFxcIk15ZmxcXFwiKSkge1xcbiAgICBsZXQgcHRfdXJsID0gYXBpICsgXFxcImdldEFyZWFzP3BsYXRmb3JtPVxcXCIgKyBnZXRNeVZhcihcXFwiTXlwdFxcXCIsIFxcXCJodXlhXFxcIik7XFxuICAgIHZhciByZXMgPSBKU09OLnBhcnNlKHJlcXVlc3QocHRfdXJsLCBoZWFkZXJzKSkuZGF0YTtcXG4gICAgLy9sb2cocmVzKVxcbiAgICBmb3IgKGxldCBqIGluIHJlcykge1xcbiAgICAgICAgbGV0IHRlbXAgPSByZXNbal07XFxuICAgICAgICBmb3IgKGRhdGEgb2YgdGVtcClcXG4gICAgICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgICAgICB0aXRsZTogZGF0YS5hcmVhTmFtZSxcXG4gICAgICAgICAgICAgICAgaW1nOiAoZ2V0TXlWYXIoXFxcIk15cHRcXFwiLCBcXFwiaHV5YVxcXCIpICE9PSBcXFwiZG91eWluXFxcIiA/IGRhdGEuYXJlYVBpYyA6IFxcXCJodHRwczovL3d3dy5kb3V5aW4uY29tL2Zhdmljb24uaWNvXFxcIikgKyBcXFwiQFJlZmVyZXI9XFxcIixcXG4gICAgICAgICAgICAgICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL25ld0NsYXNzTGlzdD9wYWdlPWZ5cGFnZSZwbGF0Zm9ybT1cXFwiICsgZGF0YS5wbGF0Zm9ybSArIFxcXCImYXJlYT1cXFwiICsgZGF0YS5hcmVhTmFtZSxcXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJpY29uXzVcXFwiXFxuICAgICAgICAgICAgfSlcXG4gICAgfTtcXG59IGVsc2Uge1xcbiAgICBkLnB1c2goe1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJiaWdfYmxhbmtfYmxvY2tcXFwiXFxuICAgIH0sIHtcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiYmlnX2JsYW5rX2Jsb2NrXFxcIlxcbiAgICB9LCB7XFxuICAgICAgICBjb2xfdHlwZTogXFxcImxpbmVcXFwiXFxuICAgIH0sIHtcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiYmlnX2JsYW5rX2Jsb2NrXFxcIlxcbiAgICB9LCB7XFxuICAgICAgICBjb2xfdHlwZTogXFxcImJpZ19ibGFua19ibG9ja1xcXCIsXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgIGlkOiBcXFwiaWRfanVzdGRselxcXCJcXG4gICAgICAgIH1cXG4gICAgfSk7XFxuXFxuICAgIC8v54mI5Z2X5YiG57G7XFxuICAgIHZhciB1cmwgPSBhcGkgKyAnZ2V0QWxsQXJlYXMnO1xcbiAgICB2YXIgcmVzID0gSlNPTi5wYXJzZShyZXF1ZXN0KHVybCwgaGVhZGVycykpLmRhdGE7XFxuICAgIC8vbG9nKHJlcylcXG5cXG4gICAgdmFyIHR5cGVOYW1lcyA9IFtdO1xcbiAgICB2YXIgYmlnTGlzdCA9IFtdO1xcbiAgICB2YXIgc21hbGxMaXN0ID0gW107XFxuICAgIHB1dE15VmFyKFxcXCJ0eXBlTmFtZVZhclxcXCIsICFnZXRNeVZhcigndHlwZU5hbWVWYXInKSA/ICflhajpg6gnIDogZ2V0TXlWYXIoJ3R5cGVOYW1lVmFyJykpO1xcbiAgICBwdXRNeVZhcignYXJlYScsICdhcmVhTmFtZScpXFxuXFxuICAgIGZvciAobGV0IHIgb2YgcmVzKSB7XFxuICAgICAgICBmb3IgKGxldCB4IG9mIHIpIHtcXG4gICAgICAgICAgICBpZiAoIXR5cGVOYW1lcy5pbmNsdWRlcyh4LnR5cGVOYW1lKSkge1xcbiAgICAgICAgICAgICAgICB0eXBlTmFtZXMucHVzaCh4LnR5cGVOYW1lKTtcXG5cXG4gICAgICAgICAgICAgICAgYmlnTGlzdC5wdXNoKHtcXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB4LnR5cGVOYW1lLFxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKCh0eXBlTmFtZVZhciwgcikgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1dE15VmFyKFxcXCJ0eXBlTmFtZVZhclxcXCIsIHR5cGVOYW1lVmFyKTtcXG5cXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVJdGVtKFxcXCJpZF9qdXN0YmpcXFwiLCB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcXFwiPGI+XFxcXHRcXFwiICsgdHlwZU5hbWVWYXIuZm9udGNvbG9yKFxcXCIjRkE3Mjk4XFxcIikgKyBcXFwiPC9iPlxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVJdGVtQnlDbHMoXFxcImNsc19qdXN0eGxcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBzbWFsTGlzdCA9IHIubWFwKChsaSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGxpLmFyZWFOYW1lLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nOiBsaS5hcmVhUGljLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL25ld0NsYXNzTGlzdD90eXBlTmFtZT1cXFwiICsgbGkudHlwZU5hbWUgKyBcXFwiJmFyZWFOYW1lPVxcXCIgKyBsaS5hcmVhTmFtZSArIFxcXCImcGFnZT1meXBhZ2VcXFwiLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJpY29uXzVcXFwiLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZU5hbWU6IGxpLnR5cGVOYW1lLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbHM6IFxcXCJjbHNfanVzdHhsXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkSXRlbUFmdGVyKFxcXCJpZF9qdXN0eGx6XFxcIiwgc21hbExpc3QpO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCJcXG4gICAgICAgICAgICAgICAgICAgIH0sIHgudHlwZU5hbWUsIHIpLFxcbiAgICAgICAgICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJzY3JvbGxfYnV0dG9uXFxcIixcXG4gICAgICAgICAgICAgICAgfSlcXG4gICAgICAgICAgICB9O1xcblxcbiAgICAgICAgICAgIHNtYWxsTGlzdC5wdXNoKHtcXG4gICAgICAgICAgICAgICAgdGl0bGU6IHguYXJlYU5hbWUsXFxuICAgICAgICAgICAgICAgIHVybDogJ2hpa2VyOi8vcGFnZS9uZXdDbGFzc0xpc3Q/dHlwZU5hbWU9JyArIHgudHlwZU5hbWUgKyAnJmFyZWFOYW1lPScgKyB4LmFyZWFOYW1lICsgXFxcIiZwYWdlPWZ5cGFnZVxcXCIsXFxuICAgICAgICAgICAgICAgIGltZzogeC5hcmVhUGljICsgXFxcIkBSZWZlcmVyPVxcXCIsXFxuICAgICAgICAgICAgICAgIGNvbF90eXBlOiBcXFwiaWNvbl81XFxcIixcXG4gICAgICAgICAgICAgICAgdHlwZU5hbWU6IHgudHlwZU5hbWUsXFxuICAgICAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgICAgICBjbHM6IFxcXCJjbHNfanVzdHhsXFxcIlxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfSlcXG4gICAgICAgIH1cXG4gICAgfTtcXG5cXG4gICAgYmlnTGlzdC51bnNoaWZ0KHtcXG4gICAgICAgIHRpdGxlOiBcXFwi5YWo6YOoXFxcIixcXG4gICAgICAgIHVybDogJCgnI25vTG9hZGluZyMnKS5sYXp5UnVsZSgodHlwZU5hbWVWYXIsIHNtYWxsTGlzdCkgPT4ge1xcbiAgICAgICAgICAgIHB1dE15VmFyKFxcXCJ0eXBlTmFtZVZhclxcXCIsIHR5cGVOYW1lVmFyKTtcXG4gICAgICAgICAgICB1cGRhdGVJdGVtKFxcXCJpZF9qdXN0YmpcXFwiLCB7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcXFwiPGI+XFxcXHRcXFwiICsgdHlwZU5hbWVWYXIuZm9udGNvbG9yKFxcXCIjRkE3Mjk4XFxcIikgKyBcXFwiPC9iPlxcXCJcXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICBkZWxldGVJdGVtQnlDbHMoXFxcImNsc19qdXN0eGxcXFwiKTtcXG4gICAgICAgICAgICBhZGRJdGVtQWZ0ZXIoXFxcImlkX2p1c3R4bHpcXFwiLCBzbWFsbExpc3QpO1xcbiAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICB9LCAn5YWo6YOoJywgc21hbGxMaXN0KSxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCJcXG4gICAgfSlcXG4gICAgZCA9IGQuY29uY2F0KGJpZ0xpc3QpO1xcblxcbiAgICBkLnB1c2goe1xcbiAgICAgICAgdGl0bGU6IFxcXCI8Yj5cXFxcdFxcXCIgKyBnZXRNeVZhcigndHlwZU5hbWVWYXInKS5mb250Y29sb3IoXFxcIiNGQTcyOThcXFwiKSArIFxcXCI8L2I+XFxcIixcXG4gICAgICAgIGltZzogXFxcImh0dHBzOi8vaGlrZXJmYW5zLmNvbS90dWJpYW8vcS8zMy5wbmdcXFwiLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJhdmF0YXJcXFwiLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICBpZDogXFxcImlkX2p1c3RialxcXCJcXG4gICAgICAgIH1cXG4gICAgfSwge1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJsaW5lX2JsYW5rXFxcIixcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgaWQ6IFxcXCJpZF9qdXN0eGx6XFxcIlxcbiAgICAgICAgfVxcbiAgICB9KTtcXG5cXG4gICAgaWYgKGdldE15VmFyKCd0eXBlTmFtZVZhcicpID09ICflhajpg6gnKSB7XFxuICAgICAgICBkID0gZC5jb25jYXQoc21hbGxMaXN0KTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIGQgPSBkLmNvbmNhdChzbWFsbExpc3QuZmlsdGVyKHMgPT4gcy50eXBlTmFtZSA9PSBnZXRNeVZhcigndHlwZU5hbWVWYXInKSkpO1xcbiAgICB9O1xcbn07XFxuZGVsZXRlSXRlbUJ5Q2xzKFxcXCJjbHNfbG9hZFxcXCIpO1xcbnNldFJlc3VsdChkKTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIuaAu+WIl+ihqFwiLFwicGF0aFwiOlwibmV3Q2xhc3NMaXN0XCIsXCJydWxlXCI6XCJqczpcXG52YXIgZCA9IFtdO1xcbmxldCBzID0gW107XFxuYWRkTGlzdGVuZXIoJ29uQ2xvc2UnLCAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgY2xlYXJNeVZhcignTXlmcm8nKTtcXG4gICAgY2xlYXJNeVZhcignaG9tZScpO1xcbn0pKTtcXG5sZXQgYXBpID0gXFxcImh0dHA6Ly95ajEyMTEud29yazo4MDEzL2FwaS9saXZlL1xcXCI7XFxubGV0IHVpZCA9IGdldEl0ZW0oXFxcInVpZFxcXCIsIFxcXCJcXFwiKTtcXG5sZXQgaGVhZGVycyA9IHtcXG4gICAgaGVhZGVyczoge1xcbiAgICAgICAgXFxcIlVzZXItQWdlbnRcXFwiOiBcXFwib2todHRwLzMuMTIuMTNcXFwiXFxuICAgIH1cXG59O1xcbi8v5YiH5o2i5bmz5Y+wXFxuaWYgKE1ZX1BBR0UgPT0gMSkge1xcbiAgICBsZXQgZnJvID0gXFxcIk15ZnJvXFxcIjtcXG4gICAgJC5yZXF1aXJlKFxcXCJwdWJsaWNcXFwiKS5QdWJsaWMuRnJvbShzLCBmcm8pO1xcbiAgICBzLnB1c2goe1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJsaW5lX2JsYW5rXFxcIlxcbiAgICB9LCB7XFxuICAgICAgICBjb2xfdHlwZTogXFxcImJpZ19ibGFua19ibG9ja1xcXCJcXG4gICAgfSwge1xcbiAgICAgICAgY29sX3R5cGU6IFxcXCJiaWdfYmxhbmtfYmxvY2tcXFwiXFxuICAgIH0pXFxuICAgIHMucHVzaCh7XFxuICAgICAgICBjb2xfdHlwZTogXFxcInJpY2hfdGV4dFxcXCIsXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgIGNsczogXFxcImNsc19sb2FkXFxcIlxcbiAgICAgICAgfVxcbiAgICB9LCB7XFxuICAgICAgICBpbWc6IFxcXCJodHRwczovL2hpa2VyZmFucy5jb20vd2Vpc3lyL2ltZy9Mb2FkaW5nMS5naWZcXFwiLFxcbiAgICAgICAgdXJsOiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCIsXFxuICAgICAgICBjb2xfdHlwZTogXFxcInBpY18xX2NlbnRlclxcXCIsXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgIGNsczogXFxcImNsc19sb2FkXFxcIlxcbiAgICAgICAgfVxcbiAgICB9KVxcbn07XFxuc2V0UHJlUmVzdWx0KHMpO1xcblxcbi8v5YiX6KGoXFxubGV0IE15ZnJvID0gZ2V0TXlWYXIoXFxcIk15ZnJvXFxcIiwgXFxcIlxcXCIpO1xcbmxldCBwYWdlID0gZ2V0UGFyYW0oXFxcInBhZ2VcXFwiKTtcXG5sZXQgem9uZyA9IGFwaSArICdnZXRSZWNvbW1lbmRCeUFyZWFBbGw/YXJlYVR5cGU9JyArIGdldFBhcmFtKFxcXCJ0eXBlTmFtZVxcXCIpICsgJyZhcmVhPScgKyBnZXRQYXJhbShcXFwiYXJlYU5hbWVcXFwiKSArICcmcGFnZT0nICsgcGFnZTtcXG5cXG5sZXQgemYgPSBhcGkgKyBcXFwiZ2V0UmVjb21tZW5kQnlQbGF0Zm9ybUFyZWE/cGxhdGZvcm09XFxcIiArIE15ZnJvICsgXFxcIiZhcmVhPVxcXCIgKyBnZXRQYXJhbShcXFwiYXJlYU5hbWVcXFwiKSArIFxcXCImcGFnZT1cXFwiICsgcGFnZSArIFxcXCImc2l6ZT0yMFxcXCI7XFxuXFxubGV0IHBpbiA9IGFwaSArIFxcXCJnZXRSZWNvbW1lbmRCeVBsYXRmb3JtQXJlYVxcXCIgKyBNWV9VUkwucmVwbGFjZShcXFwiaGlrZXI6Ly9wYWdlL25ld0NsYXNzTGlzdFxcXCIsIFxcXCJcXFwiKSArIFxcXCImcGFnZT1cXFwiICsgcGFnZSArIFxcXCImc2l6ZT0yMFxcXCI7XFxuLy9sb2cocGluKVxcblxcbmxldCBwZiA9IGFwaSArIFxcXCJnZXRSZWNvbW1lbmRCeVBsYXRmb3JtQXJlYT9wbGF0Zm9ybT1cXFwiICsgTXlmcm8gKyBcXFwiJmFyZWE9XFxcIiArIGdldE15VmFyKFxcXCJhcmVhXFxcIikgKyBcXFwiJnBhZ2U9XFxcIiArIHBhZ2UgKyBcXFwiJnNpemU9MjBcXFwiO1xcblxcbnRyeSB7XFxuICAgIGxldCBhcmVhID0gcGluLm1hdGNoKC9hcmVhPSguKj8pJi8pWzFdO1xcbiAgICAvL2xvZyhhcmVhKVxcbiAgICBwdXRNeVZhcihcXFwiYXJlYVxcXCIsIGFyZWEpO1xcbn0gY2F0Y2ggKGUpIHtcXG4gICAgdmFyIGFyZWEgPSBcXFwiXFxcIjtcXG59O1xcbmxldCB1cmwgPSBcXFwiXFxcIjtcXG5pZiAoYXJlYSA9PSBcXFwiXFxcIikge1xcbiAgICB1cmwgPSBNeWZybyAhPT0gXFxcIlxcXCIgPyB6ZiA6IHpvbmc7XFxufSBlbHNlIHtcXG4gICAgdXJsID0gTXlmcm8gIT09IFxcXCJcXFwiID8gcGYgOiBwaW47XFxufTtcXG5cXG50cnkge1xcbiAgICBsZXQgcmVzID0gKEpTT04ucGFyc2UocmVxdWVzdCh1cmwsIGhlYWRlcnMpKS5kYXRhIHx8IFtdKTtcXG4gICAgaWYgKHJlcyA9PSAobnVsbCB8fCBcXFwiXFxcIikgJiYgcGFnZSA9PSBcXFwiMVxcXCIpIHtcXG4gICAgICAgICQucmVxdWlyZShcXFwicHVibGljXFxcIikuUHVibGljLkVtcHR5KGQpO1xcbiAgICB9O1xcbiAgICBsZXQgcGxhY2UgPSBcXFwiaG9tZVxcXCI7XFxuICAgIGZvciAobGV0IGkgaW4gcmVzKSB7XFxuICAgICAgICBsZXQgdGVtcCA9IHJlc1tpXTtcXG4gICAgICAgICQucmVxdWlyZShcXFwicHVibGljXFxcIikuUHVibGljLkxpc3RzKGFwaSwgdWlkLCBwbGFjZSwgZCwgdGVtcC5yb29tSWQsIHRlbXAucGxhdEZvcm0sIHRlbXAub3duZXJOYW1lLCB0ZW1wLmNhdGVnb3J5TmFtZSwgdGVtcC5vbmxpbmUsIHRlbXAucm9vbVBpYywgdGVtcC5pc0xpdmUpO1xcbiAgICB9O1xcbn0gY2F0Y2ggKGUpIHtcXG4gICAgaWYgKHBhZ2UgPT0gXFxcIjFcXFwiKSB7XFxuICAgICAgICBsZXQgYXJlYSA9IHVybC5tYXRjaCgvYXJlYT0oLiopJi8pWzFdO1xcbiAgICAgICAgaWYgKGdldE15VmFyKFxcXCJob21lXFxcIiwgXFxcIjBcXFwiKSA9PSBcXFwiMVxcXCIpIHtcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFwic2FyZWFcXFwiLCBhcmVhKTtcXG4gICAgICAgIH07XFxuICAgICAgICAkLnJlcXVpcmUoXFxcInB1YmxpY1xcXCIpLlB1YmxpYy5FbXB0eShkKTtcXG4gICAgfTtcXG59O1xcbmRlbGV0ZUl0ZW1CeUNscyhcXFwiY2xzX2xvYWRcXFwiKTtcXG5zZXRSZXN1bHQoZCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLmkJzntKLpobXpnaJcIixcInBhdGhcIjpcInNlYXJjaFwiLFwicnVsZVwiOlwiJC5leHBvcnRzID0ge1xcbiAgICBlbmdpbmVzOiBbXFxcIuaJgOacieW5s+WPsFxcXCIsIFxcXCLomY7niZnnm7Tmkq1cXFwiLCBcXFwi5paX6bG855u05pKtXFxcIiwgXFxcIuWTlOWTqeWTlOWTqVxcXCIsIFxcXCLmipbpn7Pnm7Tmkq1cXFwiLCBcXFwi572R5piTQ0NcXFwiXSxcXG4gICAgc2VhcmNoOiBmdW5jdGlvbigpIHtcXG4gICAgICAgIC8vbG9nKGdldFBhcmFtKFxcXCJlbmdpbmVcXFwiKSlcXG4gICAgICAgIGxldCBhcGkgPSBcXFwiaHR0cDovL3lqMTIxMS53b3JrOjgwMTMvYXBpL2xpdmUvXFxcIjtcXG4gICAgICAgIGxldCBoZWFkZXJzID0ge1xcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcXG4gICAgICAgICAgICAgICAgXFxcIlVzZXItQWdlbnRcXFwiOiBcXFwib2todHRwLzMuMTIuMTNcXFwiXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfTtcXG4gICAgICAgIGxldCB1cmwgPSBhcGkgKyBcXFwic2VhcmNoP2tleVdvcmRzPVxcXCIgKyBnZXRQYXJhbShcXFwia3dcXFwiKSArIFxcXCImaXNMaXZlPTAmdWlkPVxcXCIgKyBnZXRJdGVtKFxcXCJ1aWRcXFwiLCBcXFwiXFxcIikgKyBcXFwiJnBsYXRmb3JtPVxcXCIgKyBbXFxcImFsbFxcXCIsIFxcXCJodXlhXFxcIiwgXFxcImRvdXl1XFxcIiwgXFxcImJpbGliaWxpXFxcIiwgXFxcImRvdXlpblxcXCIsIFxcXCJjY1xcXCJdW1xcbiAgICAgICAgICAgIFtcXFwi5omA5pyJ5bmz5Y+wXFxcIiwgXFxcIuiZjueJmeebtOaSrVxcXCIsIFxcXCLmlpfpsbznm7Tmkq1cXFwiLCBcXFwi5ZOU5ZOp5ZOU5ZOpXFxcIiwgXFxcIuaKlumfs+ebtOaSrVxcXCIsIFxcXCLnvZHmmJNDQ1xcXCJdLmluZGV4T2YoZ2V0UGFyYW0oXFxcImVuZ2luZVxcXCIpKVxcbiAgICAgICAgXVxcbiAgICAgICAgbGV0IGpzb24gPSBKU09OLnBhcnNlKHJlcXVlc3QodXJsLCBoZWFkZXJzKSkuZGF0YTtcXG4gICAgICAgIGQgPSBqc29uLm1hcChkYXRhID0+ICh7XFxuICAgICAgICAgICAgdGl0bGU6IGRhdGEucGxhdGZvcm0ucmVwbGFjZSgnaHV5YScsICfomY7niZknKS5yZXBsYWNlKCdkb3V5dScsICfmlpfpsbwnKS5yZXBsYWNlKCdjYycsICfnvZHmmJNDQycpLnJlcGxhY2UoXFxcImJpbGliaWxpXFxcIiwgXFxcIuWTlOWTqVxcXCIpLnJlcGxhY2UoXFxcImRvdXlpblxcXCIsIFxcXCLmipbpn7NcXFwiKSArICfCtycgKyBkYXRhLm5pY2tOYW1lLFxcbiAgICAgICAgICAgIGRlc2M6IGRhdGEuZm9sbG93ZXJzID49IFxcXCIxMDAwMFxcXCIgPyAoZGF0YS5mb2xsb3dlcnMgLyAxMDAwMCkudG9GaXhlZCgxKSArIFxcXCLkuIfnsonkuJ1cXFwiIDogZGF0YS5mb2xsb3dlcnMgKyBcXFwi57KJ5LidXFxcIixcXG4gICAgICAgICAgICBpbWc6IChkYXRhLmhlYWRQaWMgIT09IG51bGwgJiYgZGF0YS5oZWFkUGljLnN0YXJ0c1dpdGgoJy8nKSA/ICdodHRwczonICsgZGF0YS5oZWFkUGljIDogZGF0YS5oZWFkUGljKSArICdAUmVmZXJlcj0nLFxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGRhdGEuaXNMaXZlID09ICcxJyA/ICfnm7Tmkq3kuK0nIDogJ+acquW8gOaSrScsXFxuICAgICAgICAgICAgdXJsOiBnZXRJdGVtKCdtdWx0aWxpbmUnLCAnMCcpID09IFxcXCIwXFxcIiA/IGFwaSArIFxcXCJnZXRSZWFsVXJsTXVsdGlTb3VyY2U/cGxhdGZvcm09XFxcIiArIGRhdGEucGxhdGZvcm0gKyBcXFwiJnJvb21JZD1cXFwiICsgZGF0YS5yb29tSWQgKyAkLnJlcXVpcmUoXFxcInB1YmxpYz8mcnVsZT1KdXN0TGl2ZVxcXCIpLlB1YmxpYy5MYXp5KGRhdGEuaXNMaXZlKSA6IFxcXCJoaWtlcjovL3BhZ2UvZGV0YWlsPyNpbW1lcnNpdmVUaGVtZSMmcnVsZT1KdXN0TGl2ZSZwbGF0Zm9ybT1cXFwiICsgZGF0YS5wbGF0Zm9ybSArIFxcXCImcm9vbUlkPVxcXCIgKyBkYXRhLnJvb21JZFxcbiAgICAgICAgfSkpXFxuICAgICAgICBzZXRSZXN1bHQoZCk7XFxuICAgIH1cXG59O1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5YWs55So5Ye95pWwXCIsXCJwYXRoXCI6XCJwdWJsaWNcIixcInJ1bGVcIjpcImxldCBoZWFkZXJzID0ge1xcbiAgICBoZWFkZXJzOiB7XFxuICAgICAgICBcXFwiVXNlci1BZ2VudFxcXCI6IFxcXCJva2h0dHAvMy4xMi4xM1xcXCJcXG4gICAgfVxcbn07XFxuXFxubGV0IEZyb20gPSBmdW5jdGlvbihkLCBmcm8pIHtcXG4gICAgbGV0IHRpdCA9IFtcXFwi6JmO54mZXFxcIiwgXFxcIuaWl+mxvFxcXCIsIFxcXCLlk5Tlk6lcXFwiLCBcXFwi5oqW6Z+zXFxcIiwgXFxcIue9keaYk1xcXCJdO1xcbiAgICBsZXQgZnVybCA9IFtcXFwiaHV5YVxcXCIsIFxcXCJkb3V5dVxcXCIsIFxcXCJiaWxpYmlsaVxcXCIsIFxcXCJkb3V5aW5cXFwiLCBcXFwiY2NcXFwiXTtcXG4gICAgbGV0IHBpYyA9IFtcXFwiaHR0cHM6Ly9oaWtlcmZhbnMuY29tL3R1Ymlhby9lcmRpLzY4LnBuZ1xcXCIsIFxcXCJodHRwczovL2hpa2VyZmFucy5jb20vdHViaWFvL2VyZGkvMS5wbmdcXFwiLCBcXFwiaHR0cHM6Ly9oaWtlcmZhbnMuY29tL3R1Ymlhby9lcmRpLzMyMC5wbmdcXFwiLCBcXFwiaHR0cHM6Ly9oaWtlcmZhbnMuY29tL3R1Ymlhby9lcmRpLzE2MC5wbmdcXFwiLCBcXFwiaHR0cHM6Ly9oaWtlcmZhbnMuY29tL3R1Ymlhby9lcmRpLzIxNC5wbmdcXFwiXTtcXG4gICAgbGV0IHRpdGxsID0gZnJvID09IFxcXCJNeXB0XFxcIiA/IGdldE15VmFyKGZybywgXFxcImh1eWFcXFwiKSA6IGdldE15VmFyKGZybyk7XFxuICAgIGZvciAobGV0IGkgaW4gdGl0KSB7XFxuICAgICAgICBsZXQgdGkgPSB0aXRbaV07XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBmdXJsW2ldID09IHRpdGxsID8gXFxcIuKAmOKAmOKAmeKAmTxiPlxcXCIgKyB0aS5mb250Y29sb3IoXFxcIiNGQTcyOThcXFwiKSArIFxcXCI8L2I+XFxcIiA6IHRpLFxcbiAgICAgICAgICAgIHVybDogJCgnI25vTG9hZGluZyMnKS5sYXp5UnVsZSgodXJsLCBmcm8pID0+IHtcXG4gICAgICAgICAgICAgICAgcHV0TXlWYXIoZnJvLCB1cmwpO1xcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCJcXG4gICAgICAgICAgICB9LCBmdXJsW2ldLCBmcm8pLFxcbiAgICAgICAgICAgIGltZzogcGljW2ldICsgXFxcIkBSZWZlcmVyPVxcXCIsXFxuICAgICAgICAgICAgY29sX3R5cGU6IFxcXCJpY29uXzVcXFwiXFxuICAgICAgICB9KVxcbiAgICB9O1xcbn07XFxuXFxubGV0IExpc3RzID0gZnVuY3Rpb24oYXBpLCB1aWQsIHBsYWNlLCBkLCByb29tSWQsIHBsYXRGb3JtLCBvd25lck5hbWUsIGNhdGVnb3J5TmFtZSwgb25saW5lLCByb29tUGljLCBpc0xpdmUpIHtcXG4gICAgbGV0IGNhdGVnb3J5ID0gY2F0ZWdvcnlOYW1lICE9PSBcXFwiXFxcIiA/IGNhdGVnb3J5TmFtZSArICfCtycgOiBcXFwiXFxcIjtcXG4gICAgbGV0IExpdmUgPSAoaXNMaXZlID09ICcxJyA/ICfnm7Tmkq3kuK0nIDogJ+acquW8gOaSrScpICsgJ8K3JztcXG4gICAgbGV0IOS4hyA9IHBsYWNlID09IFxcXCJob21lXFxcIiA/IFxcXCLkuIdcXFwiIDogXFxcIuS4h+eyieS4nVxcXCI7XFxuICAgIGxldCDkurogPSBwbGFjZSA9PSBcXFwiaG9tZVxcXCIgPyBcXFwi5Lq6XFxcIiA6IFxcXCLnsonkuJ1cXFwiO1xcbiAgICBsZXQgbGluZSA9IG9ubGluZSA+PSBcXFwiMTAwMDBcXFwiID8gKG9ubGluZSAvIDEwMDAwKS50b0ZpeGVkKDEpICsg5LiHIDogb25saW5lICsg5Lq6O1xcbiAgICBsZXQgcGxhdCA9IHBsYXRGb3JtLnJlcGxhY2UoJ2h1eWEnLCAn6JmO54mZJykucmVwbGFjZSgnZG91eXUnLCAn5paX6bG8JykucmVwbGFjZSgnY2MnLCAn572R5piTQ0MnKS5yZXBsYWNlKFxcXCJiaWxpYmlsaVxcXCIsIFxcXCLlk5Tlk6lcXFwiKS5yZXBsYWNlKFxcXCJkb3V5aW5cXFwiLCBcXFwi5oqW6Z+zXFxcIik7XFxuICAgIGxldCByb29tcGljID0gcm9vbVBpYyAhPT0gbnVsbCAmJiByb29tUGljLnN0YXJ0c1dpdGgoJy8nKSA/ICdodHRwczonICsgcm9vbVBpYyA6IHJvb21QaWM7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogcGxhdCArICfCtycgKyBvd25lck5hbWUsXFxuICAgICAgICBkZXNjOiAocGxhY2UgPT0gXFxcInNvXFxcIiA/IExpdmUgOiBjYXRlZ29yeSkgKyBsaW5lLFxcbiAgICAgICAgaW1nOiByb29tcGljICsgJ0BSZWZlcmVyPScsXFxuICAgICAgICB1cmw6IGdldEl0ZW0oJ211bHRpbGluZScsICcwJykgPT0gXFxcIjBcXFwiID8gYXBpICsgXFxcImdldFJlYWxVcmxNdWx0aVNvdXJjZT9wbGF0Zm9ybT1cXFwiICsgcGxhdEZvcm0gKyBcXFwiJnJvb21JZD1cXFwiICsgcm9vbUlkICsgJC5yZXF1aXJlKFxcXCJwdWJsaWNcXFwiKS5QdWJsaWMuTGF6eShpc0xpdmUpIDogXFxcImhpa2VyOi8vcGFnZS9kZXRhaWw/I2ltbWVyc2l2ZVRoZW1lIyZwbGF0Zm9ybT1cXFwiICsgcGxhdEZvcm0gKyBcXFwiJnJvb21JZD1cXFwiICsgcm9vbUlkLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJtb3ZpZV8yXFxcIixcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgY2xzOiBcXFwiY2xzX1N1YnMgXFxcIiArIFxcXCJjbHMtXFxcIiArIHBsYWNlLFxcbiAgICAgICAgICAgIGlkOiBcXFwiaWRfXFxcIiArIHBsYXRGb3JtICsgcm9vbUlkLFxcbiAgICAgICAgICAgIGlzTGl2ZTogaXNMaXZlLFxcbiAgICAgICAgICAgIGxpbmVWaXNpYmxlOiBmYWxzZSxcXG4gICAgICAgICAgICBsb25nQ2xpY2s6IFt7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiBnZXRJdGVtKHBsYXRGb3JtICsgcm9vbUlkLCBcXFwiMFxcXCIpID09IFxcXCIxXFxcIiA/IFxcXCLlt7LlhbPms6hcXFwiIDogXFxcIuacquWFs+azqFxcXCIsXFxuICAgICAgICAgICAgICAgIGpzOiAkLnJlcXVpcmUoXFxcInB1YmxpY1xcXCIpLlB1YmxpYy5Mb25nQ2xpY2soYXBpLCB1aWQsIHJvb21JZCwgcGxhdEZvcm0pLFxcbiAgICAgICAgICAgIH0sIHtcXG4gICAgICAgICAgICAgICAgdGl0bGU6IFxcXCLlrpjnvZHpk77mjqVcXFwiLFxcbiAgICAgICAgICAgICAgICBqczogJC50b1N0cmluZygocm9vbWlkLCBwbGF0Zm9ybSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwbGF0Zm9ybSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXFxcImRvdXl1XFxcIjpcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IFxcXCJodHRwczovL20uZG91eXUuY29tL1xcXCIgKyByb29taWRcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFxcXCJiaWxpYmlsaVxcXCI6XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBcXFwiaHR0cHM6Ly9saXZlLmJpbGliaWxpLmNvbS9oNS9cXFwiICsgcm9vbWlkXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcXFwiaHV5YVxcXCI6XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBcXFwiaHR0cHM6Ly9tLmh1eWEuY29tL1xcXCIgKyByb29taWRcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFxcXCJkb3V5aW5cXFwiOlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gXFxcImh0dHBzOi8vbGl2ZS5kb3V5aW4uY29tL1xcXCIgKyByb29taWRcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFxcXCJjY1xcXCI6XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBcXFwiaHR0cHM6Ly9oNS5jYy4xNjMuY29tL2NjL1xcXCIgKyByb29taWRcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1cmxcXG4gICAgICAgICAgICAgICAgfSwgcm9vbUlkLCBwbGF0Rm9ybSlcXG4gICAgICAgICAgICB9XVxcbiAgICAgICAgfVxcbiAgICB9KVxcbn07XFxuXFxubGV0IExvbmdDbGljayA9IGZ1bmN0aW9uKGFwaSwgdWlkLCByb29taWQsIHBsYXRmb3JtKSB7XFxuICAgIHJldHVybiAkLnRvU3RyaW5nKChhcGksIHVpZCwgaGVhZGVycywgcm9vbWlkLCBwbGF0Zm9ybSkgPT4ge1xcbiAgICAgICAgaWYgKGdldEl0ZW0ocGxhdGZvcm0gKyByb29taWQsIFxcXCIwXFxcIikgPT0gXFxcIjBcXFwiKSB7XFxuICAgICAgICAgICAgdmFyIGZvbGwgPSBcXFwiZm9sbG93XFxcIjtcXG4gICAgICAgICAgICBzZXRJdGVtKHBsYXRmb3JtICsgcm9vbWlkLCBcXFwiMVxcXCIpO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICB2YXIgZm9sbCA9IFxcXCJ1bkZvbGxvd1xcXCI7XFxuICAgICAgICAgICAgY2xlYXJJdGVtKHBsYXRmb3JtICsgcm9vbWlkKTtcXG4gICAgICAgIH07XFxuICAgICAgICBsZXQgcmVzID0gSlNPTi5wYXJzZShyZXF1ZXN0KGFwaSArIGZvbGwgKyBcXFwiP3BsYXRmb3JtPVxcXCIgKyBwbGF0Zm9ybSArIFxcXCImcm9vbUlkPVxcXCIgKyByb29taWQgKyBcXFwiJnVpZD1cXFwiICsgdWlkLCBoZWFkZXJzKSk7XFxuXFxuICAgICAgICBsZXQgc3VicyA9IGZpbmRJdGVtc0J5Q2xzKFxcXCJjbHNfU3Vic1xcXCIpIHx8IFtdO1xcbiAgICAgICAgaWYgKHN1YnMubGVuZ3RoID09IDApIHtcXG4gICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v5rKh5pyJ6I635Y+W5Yiw5YWz5rOo5YiX6KGoXFxcIjtcXG4gICAgICAgIH07XFxuICAgICAgICBsZXQgdGl0ID0gZ2V0SXRlbShwbGF0Zm9ybSArIHJvb21pZCwgXFxcIjBcXFwiKTtcXG4gICAgICAgIGZvciAobGV0IGkgaW4gc3Vicykge1xcbiAgICAgICAgICAgIGxldCBsaSA9IHN1YnNbaV07XFxuICAgICAgICAgICAgbGV0IGNscyA9IGxpLmV4dHJhLmNscztcXG4gICAgICAgICAgICBsZXQganMyID0gbGkuZXh0cmEubG9uZ0NsaWNrWzFdLmpzO1xcbiAgICAgICAgICAgIHVwZGF0ZUl0ZW0oXFxcImlkX1xcXCIgKyBwbGF0Zm9ybSArIHJvb21pZCwge1xcbiAgICAgICAgICAgICAgICBleHRyYToge1xcbiAgICAgICAgICAgICAgICAgICAgY2xzOiBjbHMsXFxuICAgICAgICAgICAgICAgICAgICBpZDogXFxcImlkX1xcXCIgKyBwbGF0Zm9ybSArIHJvb21pZCxcXG4gICAgICAgICAgICAgICAgICAgIGxpbmVWaXNpYmxlOiBmYWxzZSxcXG4gICAgICAgICAgICAgICAgICAgIGxvbmdDbGljazogW3tcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0ID09IFxcXCIxXFxcIiA/IFxcXCLlt7LlhbPms6hcXFwiIDogXFxcIuacquWFs+azqFxcXCIsXFxuICAgICAgICAgICAgICAgICAgICAgICAganM6ICQucmVxdWlyZShcXFwicHVibGljXFxcIikuUHVibGljLkxvbmdDbGljayhhcGksIHVpZCwgcm9vbWlkLCBwbGF0Zm9ybSksXFxuICAgICAgICAgICAgICAgICAgICB9LCB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFxcXCLlrpjnvZHpk77mjqVcXFwiLFxcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzOiBqczJcXG4gICAgICAgICAgICAgICAgICAgIH1dXFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICBpZiAoZ2V0TXlWYXIoXFxcInNUeXBlXFxcIiwgXFxcIlxcXCIpICE9PSBcXFwiXFxcIiAmJiB0aXQgPT0gMCkge1xcbiAgICAgICAgICAgICAgICBkZWxldGVJdGVtKFxcXCJpZF9cXFwiICsgcGxhdGZvcm0gKyByb29taWQpO1xcbiAgICAgICAgICAgIH07XFxuICAgICAgICB9O1xcbiAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL1xcXCIgKyByZXMuZGF0YTtcXG4gICAgfSwgYXBpLCB1aWQsIGhlYWRlcnMsIHJvb21pZCwgcGxhdGZvcm0pO1xcbn07XFxuXFxubGV0IExhenkgPSBmdW5jdGlvbihpc0xpdmUpIHtcXG4gICAgcmV0dXJuICQoXFxcIlxcXCIpLmxhenlSdWxlKChoZWFkZXJzLCBpc0xpdmUpID0+IHtcXG4gICAgICAgIGlmIChpc0xpdmUgPT0gMCkgcmV0dXJuIFxcXCJ0b2FzdDovL+ebtOaSreW3sue7k+adn++8gVxcXCI7XFxuICAgICAgICBsZXQgbWlkID0gaW5wdXQuc3BsaXQoXFxcInJvb21JZD1cXFwiKVsxXTtcXG4gICAgICAgIGxldCBqc29uID0gSlNPTi5wYXJzZShmZXRjaChpbnB1dCwgaGVhZGVycykpLmRhdGEgfHwgW107XFxuICAgICAgICBsZXQgdG9hcyA9IFxcXCJ0b2FzdDovL+ebtOaSreW3sue7k+adn+aIluayoeacieiOt+WPluWIsOaVsOaNrlxcXCI7XFxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoanNvbikubGVuZ3RoID09IDApIHJldHVybiB0b2FzO1xcbiAgICAgICAgZm9yIChsZXQgeGwgaW4ganNvbikge1xcbiAgICAgICAgICAgIGxldCBuYW1lID0gW107XFxuICAgICAgICAgICAgbGV0IHVybHMgPSBbXVxcbiAgICAgICAgICAgIGxldCBsaXN0ID0ganNvblt4bF07XFxuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBsaXN0KSB7XFxuICAgICAgICAgICAgICAgIGxldCBsaSA9IGxpc3RbaV07XFxuICAgICAgICAgICAgICAgIG5hbWUucHVzaChsaS5xdWFsaXR5TmFtZSlcXG4gICAgICAgICAgICAgICAgdXJscy5wdXNoKGxpLnBsYXlVcmwpXFxuICAgICAgICAgICAgfTtcXG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodXJscykgPT0gJ1tcXFwiXFxcIl0nID8gdG9hcyA6IEpTT04uc3RyaW5naWZ5KHtcXG4gICAgICAgICAgICAgICAgbmFtZXM6IG5hbWUsXFxuICAgICAgICAgICAgICAgIHVybHM6IHVybHMsXFxuICAgICAgICAgICAgICAgIGRhbm11OiAvZG91eXXmmoLml6AvLnRlc3QodXJscykgPyBcXFwid2ViOi8vaHR0cDovL2RvdXl1X2Rhbm11LmRldi50eXJhbnRnLmNvbS8/cmlkPVxcXCIgKyBtaWQgKyBcXFwiJnZlcj0xXFxcIiA6IC9odXlhLy50ZXN0KHVybHMpID8gXFxcIlxcXCIgOiBcXFwiXFxcIlxcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgfTtcXG4gICAgfSwgaGVhZGVycywgaXNMaXZlKTtcXG59O1xcblxcbmxldCBFbXB0eSA9IGZ1bmN0aW9uKGQpIHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiAnPGJyPjxicj4nLFxcbiAgICAgICAgY29sX3R5cGU6ICdyaWNoX3RleHQnXFxuICAgIH0sIHtcXG4gICAgICAgIGRlc2M6IFxcXCLmmoIgIOaXoCAg5oi/ICDpl7RcXFxcblxcXFxu6K+3ICDliIcgIOaNoiAg5YW2ICDlroMgIOW5syAg5Y+wXFxcIixcXG4gICAgICAgIHVybDogJ2hpa2VyOi8vZW1wdHknLFxcbiAgICAgICAgY29sX3R5cGU6ICd0ZXh0X2NlbnRlcl8xJyxcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgbGluZVZpc2libGU6IGZhbHNlXFxuICAgICAgICB9XFxuICAgIH0pO1xcbn07XFxuXFxuJC5leHBvcnRzLlB1YmxpYyA9IHtcXG4gICAgXFxcIkxpc3RzXFxcIjogTGlzdHMsXFxuICAgIFxcXCJGcm9tXFxcIjogRnJvbSxcXG4gICAgXFxcIkxvbmdDbGlja1xcXCI6IExvbmdDbGljayxcXG4gICAgXFxcIkxhenlcXFwiOiBMYXp5LFxcbiAgICBcXFwiRW1wdHlcXFwiOiBFbXB0eVxcbn07XCJ9XSIsImljb24iOiJodHRwczovL20uZGlhbmx1dC5jb20vZC9maWxlL2ltYWdlLzIwMjIwNDE2LzE2NTAwNzk1NTA1NDQ0NjMuanBnIiwicHJveHkiOiIifQ==